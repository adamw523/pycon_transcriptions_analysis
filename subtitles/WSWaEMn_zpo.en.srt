1
00:00:04,620 --> 00:00:06,779
good afternoon everyone earning a story
with an accession

2
00:00:06,779 --> 00:00:10,139
I'd like to lose one gomez is a mobile
engineering event break is we talked to

3
00:00:10,139 --> 00:00:11,889
us about push notifications afternoon

4
00:00:11,889 --> 00:00:18,889
thanks there was a

5
00:00:20,720 --> 00:00:24,410
Rd good okay good luck on to

6
00:00:24,410 --> 00:00:27,710
thanks for coming obvious -1 Thomas

7
00:00:27,710 --> 00:00:30,900
amount model engineer November right and
I'm gonna be talking

8
00:00:30,900 --> 00:00:34,300
a little bit about push notifications
and specially

9
00:00:34,300 --> 00:00:37,870
why job our current model op

10
00:00:37,870 --> 00:00:41,100
not physically rest but I i current web
mall model

11
00:00:41,100 --> 00:00:44,379
is just not enough for for mobile
applications

12
00:00:44,379 --> 00:00:48,039
ob so first I'm not talk about

13
00:00:48,039 --> 00:00:51,430
wide the talk it's going to be about to
let you know

14
00:00:51,430 --> 00:00:55,120
what you're in for out to basically
gonna give you a brief introduction to

15
00:00:55,120 --> 00:00:57,480
push notifications and not tell you what
they are

16
00:00:57,480 --> 00:01:01,690
and then tell you why you wanna be using
them I am going to give you a brief

17
00:01:01,690 --> 00:01:02,500
rundown

18
00:01:02,500 --> 00:01:06,869
a very high level rundown are or how
over how to implement push notifications

19
00:01:06,869 --> 00:01:07,650
and bike on

20
00:01:07,650 --> 00:01:12,600
and how to leverage %ah couple servicers
that make it a little easier in how to

21
00:01:12,600 --> 00:01:13,930
use some projects that

22
00:01:13,930 --> 00:01:18,140
that would take a little bit of the pain
away out what I'm not going to be

23
00:01:18,140 --> 00:01:18,700
covering

24
00:01:18,700 --> 00:01:22,799
I'm not gonna be covering the mall sad
side somehow gonna be speaking specifics

25
00:01:22,799 --> 00:01:23,259
about

26
00:01:23,259 --> 00:01:27,030
angry and I'll as there's there's a lot
of stuff that specific to Google and

27
00:01:27,030 --> 00:01:27,500
Apple

28
00:01:27,500 --> 00:01:31,110
that I'm going to be covering covering
but from the server side

29
00:01:31,110 --> 00:01:35,290
not from the mall site I'm also not
going to be showing a lot a code I'm

30
00:01:35,290 --> 00:01:36,820
sorry to disappoint everybody

31
00:01:36,820 --> 00:01:40,850
are but this is label as a novice talk
to Matt try to keep it as high-level

32
00:01:40,850 --> 00:01:46,110
us arm as possible but when my objective
is that when you leave here you know

33
00:01:46,110 --> 00:01:47,880
where to go how to start

34
00:01:47,880 --> 00:01:51,899
and where to find what you need to be
successful and implement

35
00:01:51,899 --> 00:01:55,500
push notification so although there's
not a lot of code you going to know what

36
00:01:55,500 --> 00:01:57,229
to do once decisions done

37
00:01:57,229 --> 00:02:02,210
and into my detailed updates so wanna
start with up

38
00:02:02,210 --> 00:02:06,229
a question I love us of have probably
wasted

39
00:02:06,229 --> 00:02:12,840
hours offer live saying at this screen
for those of you not familiar with it

40
00:02:12,840 --> 00:02:17,099
is tracking page at UPS %ah so when we
have a package

41
00:02:17,099 --> 00:02:20,650
especially a package that we're excited
about we just stare out the webpage

42
00:02:20,650 --> 00:02:22,379
incessantly hitting f5

43
00:02:22,379 --> 00:02:25,810
and and then out waiting for finally
seeing their

44
00:02:25,810 --> 00:02:31,489
their glorious the Leary out page up but
sometimes when this happens I wonder if

45
00:02:31,489 --> 00:02:32,720
there's a better way

46
00:02:32,720 --> 00:02:39,099
%ah up doing things out why do I have to
go into a web page and like I have to be

47
00:02:39,099 --> 00:02:43,940
up hitting at five every time if UBS
knows when the package is delivered the

48
00:02:43,940 --> 00:02:47,060
person that delivers the packet has to
scan it and put it on my door

49
00:02:47,060 --> 00:02:51,080
so daigneault that my package has been
delivered why do I have to be checking

50
00:02:51,080 --> 00:02:51,390
on

51
00:02:51,390 --> 00:02:55,750
on a web page and and this is partly the
model dubbed we had

52
00:02:55,750 --> 00:02:59,360
out for a long time on on the web its

53
00:02:59,360 --> 00:03:03,110
we always I we always use a browser in a
browser

54
00:03:03,110 --> 00:03:06,440
goes to the server and then obtains are
information

55
00:03:06,440 --> 00:03:10,000
mostly because limitations around how
TCPIP work

56
00:03:10,000 --> 00:03:14,459
up that's the model that we've been used
for years I just think that it's

57
00:03:14,459 --> 00:03:17,860
not very efficient it reminds me of some
road trips %ah

58
00:03:17,860 --> 00:03:21,430
that that I took a child where asking my
dad job

59
00:03:21,430 --> 00:03:24,819
if we we were there yet didn't make the
trip go any faster

60
00:03:24,819 --> 00:03:28,030
hot sell I think it's time to rything

61
00:03:28,030 --> 00:03:31,090
I am things a little bit and specially
in like the

62
00:03:31,090 --> 00:03:34,150
up developments on the mobile side

63
00:03:34,150 --> 00:03:37,700
as most viewed no of moles are
unfortunately not

64
00:03:37,700 --> 00:03:41,180
not growing %ah that their smartphone
using the

65
00:03:41,180 --> 00:03:44,970
world is now growing a lot is exploding
its

66
00:03:44,970 --> 00:03:48,500
it's huge now ended there was the
journal put some numbers

67
00:03:48,500 --> 00:03:52,360
about two weeks ago that really blew me
away

68
00:03:52,360 --> 00:03:57,180
because and in granted social networks
are a little bit ahead of the curve

69
00:03:57,180 --> 00:04:00,709
up but this are numbers on on the usage

70
00:04:00,709 --> 00:04:04,870
on social networks both on mobile and on
the desktop

71
00:04:04,870 --> 00:04:08,290
and as you can see on most social
networks than

72
00:04:08,290 --> 00:04:11,659
that the mobile usage is way higher %ah

73
00:04:11,659 --> 00:04:15,200
then than the best abused Sep for some
social networks

74
00:04:15,200 --> 00:04:18,239
so as he said something that was are
ahead of the curb raping

75
00:04:18,239 --> 00:04:21,620
all a fast if you're not going to
numbers you probably should go back and

76
00:04:21,620 --> 00:04:22,560
try to do this

77
00:04:22,560 --> 00:04:26,040
all of us are seen how our users

78
00:04:26,040 --> 00:04:29,900
are increasingly using our services on
our website more and more

79
00:04:29,900 --> 00:04:33,840
on their mobile device so I thing we
need to do more to give them

80
00:04:33,840 --> 00:04:37,280
a good experience on their devices
because that

81
00:04:37,280 --> 00:04:40,720
though all wet model they've been the
words so used to

82
00:04:40,720 --> 00:04:44,169
it's really not very efficient for
mobile devices

83
00:04:44,169 --> 00:04:48,000
mostly because moles are really
restricted obviously

84
00:04:48,000 --> 00:04:51,479
on memory on processing and and

85
00:04:51,479 --> 00:04:54,780
on battery life as well hot so the

86
00:04:54,780 --> 00:04:58,430
the that model love having to be
following the server

87
00:04:58,430 --> 00:05:01,780
every couple seconds or minutes if you
want to see

88
00:05:01,780 --> 00:05:05,940
there's new data and most of the time
does not new data

89
00:05:05,940 --> 00:05:09,130
%ah it's really efficient and ended it
gets

90
00:05:09,130 --> 00:05:12,449
it gets really evident on mobile where
years really

91
00:05:12,449 --> 00:05:15,479
depleting those precious resources like
battery

92
00:05:15,479 --> 00:05:19,490
and network and servers are smart

93
00:05:19,490 --> 00:05:23,220
just like UPS servers no when they eat
out is there so

94
00:05:23,220 --> 00:05:27,250
if there's something that the server
needs to give me observer knows

95
00:05:27,250 --> 00:05:30,530
one when that that a man has happened
and a mobile

96
00:05:30,530 --> 00:05:34,770
that the mall phone pauling the server
every five seconds every 10 seconds

97
00:05:34,770 --> 00:05:37,860
is not going to make that happen any
faster

98
00:05:37,860 --> 00:05:41,590
so there has to be a better way there
has to be a way that servers

99
00:05:41,590 --> 00:05:45,139
can tell the phone when they have data
for them

100
00:05:45,139 --> 00:05:50,070
and that will make things more efficient
and turn will Merrick make our serb is a

101
00:05:50,070 --> 00:05:51,430
lot more engaging

102
00:05:51,430 --> 00:05:54,740
and a lot more pleasant to use out for
users

103
00:05:54,740 --> 00:05:58,740
so so how do we solve this problem and
and the answer of course is

104
00:05:58,740 --> 00:06:01,750
is push notifications and that's what
I'm gonna be %ah

105
00:06:01,750 --> 00:06:05,220
speaking about to push notifications are
just out

106
00:06:05,220 --> 00:06:09,690
tiny little text messages to show up on
your phone screen

107
00:06:09,690 --> 00:06:12,850
our sometimes they have to be or a
vibration

108
00:06:12,850 --> 00:06:17,630
to call your attention up but mostly are
small chunks of information

109
00:06:17,630 --> 00:06:21,400
the hopefully will be delivered on I
relevant I'm

110
00:06:21,400 --> 00:06:25,060
so for instance a viewer I am and and I
was

111
00:06:25,060 --> 00:06:28,780
I'll with some friends not too long ago
and we were wondering we all have

112
00:06:28,780 --> 00:06:30,470
weather apps on our phones

113
00:06:30,470 --> 00:06:34,530
but you weather app tells you if you if
you checked the weather

114
00:06:34,530 --> 00:06:37,530
it tells you what the weather's going to
be like during the day but it never

115
00:06:37,530 --> 00:06:39,919
warns you for example that it's going to
rain

116
00:06:39,919 --> 00:06:44,539
cell our phones art smart enough to be
able to tell us hate

117
00:06:44,539 --> 00:06:48,280
it's going to start raining you should
prolly head inside

118
00:06:48,280 --> 00:06:51,330
if you're outside or something of that
nature so

119
00:06:51,330 --> 00:06:56,050
push notifications make services more
engaging and more delightful to use

120
00:06:56,050 --> 00:06:59,280
and third tiny messages that get
delivered

121
00:06:59,280 --> 00:07:02,680
are at the right time the

122
00:07:02,680 --> 00:07:05,840
Arctic is really simple %ah basically

123
00:07:05,840 --> 00:07:09,030
there's the the provider which is your
service

124
00:07:09,030 --> 00:07:12,650
are there's a middleman in this case the
two

125
00:07:12,650 --> 00:07:15,880
biggest smart and providers our Apple
and Google

126
00:07:15,880 --> 00:07:20,319
and then there's the actual devices on
Apple's case they're extending

127
00:07:20,319 --> 00:07:23,360
the Push Notification modeled to the
dust up to

128
00:07:23,360 --> 00:07:27,330
i jus affari was not restricted to the
mall anymore and you can push

129
00:07:27,330 --> 00:07:30,470
information into the desktop using
Safari on

130
00:07:30,470 --> 00:07:35,720
on the Apple platform so the the general
high-level architecture is really simple

131
00:07:35,720 --> 00:07:38,819
and then that the the orange I'll

132
00:07:38,819 --> 00:07:42,360
the orange circle our hearings being
it's yours it supposed to be your

133
00:07:42,360 --> 00:07:44,699
service

134
00:07:44,699 --> 00:07:48,560
hot did the push notification is really

135
00:07:48,560 --> 00:07:54,500
%uh they said as mall piece of text and
even at the low level it's still a small

136
00:07:54,500 --> 00:07:58,270
around his mall upbeat Jason this is a
specific

137
00:07:58,270 --> 00:08:01,539
I Apple push notification so it has

138
00:08:01,539 --> 00:08:05,500
doubt the we're action lock key that
basically

139
00:08:05,500 --> 00:08:09,090
it's telling the phone what to do when
the user unlock the phone

140
00:08:09,090 --> 00:08:12,590
job doesn't you have an iPhone no the
you push notifications

141
00:08:12,590 --> 00:08:16,650
I'm sometimes shown your lock screen so
we have to tell the phone what to do

142
00:08:16,650 --> 00:08:20,099
when you block out so it's a really
simple

143
00:08:20,099 --> 00:08:23,169
are gays in string %ah that's far above

144
00:08:23,169 --> 00:08:26,870
the beauty of push notifications their
base on on the technologies that we

145
00:08:26,870 --> 00:08:28,039
already use

146
00:08:28,039 --> 00:08:32,159
is not being super complicated it's
stuff that we already know

147
00:08:32,159 --> 00:08:35,640
outsider relatively easy implanted the
release to implant an

148
00:08:35,640 --> 00:08:39,120
and by fun outside visitors there's to

149
00:08:39,120 --> 00:08:43,849
I'll the two big providers for for
smartphones are Apple and Google

150
00:08:43,849 --> 00:08:47,180
they have that most robust
implementations and the two that were

151
00:08:47,180 --> 00:08:49,170
gonna be covering today

152
00:08:49,170 --> 00:08:53,550
oz it is a high-level comparison between
the two job services

153
00:08:53,550 --> 00:09:00,550
cell I'll the main difference between
the two is died on the Apple side

154
00:09:00,790 --> 00:09:04,390
you have to you actually open a TCP IP
socket

155
00:09:04,390 --> 00:09:07,810
and then send by any data to Apple out

156
00:09:07,810 --> 00:09:11,589
for that needed to be pushed into the
phone google has a more

157
00:09:11,589 --> 00:09:16,089
out but a web friendly job for a call
where the use

158
00:09:16,089 --> 00:09:21,070
HTTP and they have recently implemented
a new version of the serb is

159
00:09:21,070 --> 00:09:24,519
that uses XMPP which is what a lot about
Noah's

160
00:09:24,519 --> 00:09:28,970
Java which is out just chat pro cool
that use a socket as well

161
00:09:28,970 --> 00:09:32,660
om then there's are out

162
00:09:32,660 --> 00:09:36,350
interesting ob points and the two
services

163
00:09:36,350 --> 00:09:39,540
security wise they're pretty similar
although with

164
00:09:39,540 --> 00:09:43,529
will see that that the security side on
Apple is a little bit more complicated

165
00:09:43,529 --> 00:09:44,820
on Google

166
00:09:44,820 --> 00:09:48,950
and then the payload which is the actual
message it's a lot smaller on the Apple

167
00:09:48,950 --> 00:09:50,149
site mostly because

168
00:09:50,149 --> 00:09:54,019
on the Apple site out once you send the
push to a phone

169
00:09:54,019 --> 00:09:57,959
%uh the the operating system is the one
that controls the bush

170
00:09:57,959 --> 00:10:01,640
on Android push gets passed directly to
the application

171
00:10:01,640 --> 00:10:04,950
and the application decides what to do
so that's kinda why

172
00:10:04,950 --> 00:10:08,700
out the payload it's a little bigger or
are a little bigger on the

173
00:10:08,700 --> 00:10:12,800
on the Google site that on on the Apple
site and finally there's

174
00:10:12,800 --> 00:10:17,839
the how I get errors %ah usually when
I'm pushing to a lot of devices

175
00:10:17,839 --> 00:10:21,820
there's a lot of out the device could be
of the device to be

176
00:10:21,820 --> 00:10:25,890
permanently unregister from the service
others many

177
00:10:25,890 --> 00:10:30,600
up issues decker writes on out during
the execution of your app

178
00:10:30,600 --> 00:10:34,850
outside to get those errors back on the
Apple model you have to

179
00:10:34,850 --> 00:10:38,399
havin a single ounce process stop
calling

180
00:10:38,399 --> 00:10:41,579
the Apple server to a socket to get the
air is back

181
00:10:41,579 --> 00:10:45,040
on the Google model I it's a little bit
more family again

182
00:10:45,040 --> 00:10:48,540
you get those errors directly when you
make your request so you're doing you

183
00:10:48,540 --> 00:10:49,850
using the ATP

184
00:10:49,850 --> 00:10:54,290
API you get it on your FB response if
you using the XMPP

185
00:10:54,290 --> 00:10:58,149
I am implementation you get it on your
exam BB response

186
00:10:58,149 --> 00:11:02,860
so it's it's a little bit easier on on
the Google site

187
00:11:02,860 --> 00:11:06,600
%ah push notifications are great by the
old up downside

188
00:11:06,600 --> 00:11:10,130
the biggest downsides there they're not
ass reliable

189
00:11:10,130 --> 00:11:14,300
of us I would like them to be there's no
guarantee that your message is going to

190
00:11:14,300 --> 00:11:15,500
be delivered

191
00:11:15,500 --> 00:11:19,149
in most cases it gets delivered so in
most cases

192
00:11:19,149 --> 00:11:22,320
you do get that that the message and

193
00:11:22,320 --> 00:11:26,390
you you're able to push the message to
users but there's no guarantee from the

194
00:11:26,390 --> 00:11:28,540
provider that that's going to be the
case

195
00:11:28,540 --> 00:11:31,790
so you have to be prepared for those
cases and you have to plan ahead and I

196
00:11:31,790 --> 00:11:32,790
guess that's a

197
00:11:32,790 --> 00:11:37,190
thats downside the art downside is dad
sometimes have your phone is of a

198
00:11:37,190 --> 00:11:39,649
reviewer outside of your area
connectivity

199
00:11:39,649 --> 00:11:43,010
I it could happen that by the time you
get the message

200
00:11:43,010 --> 00:11:47,029
%ah the data is no longer run so the way
both providers

201
00:11:47,029 --> 00:11:50,959
are dealing with it is the I an
expiration om

202
00:11:50,959 --> 00:11:54,490
expiration time to the messages so when
you send a message

203
00:11:54,490 --> 00:11:57,769
to I did after all Google you have to
put an expiration time on

204
00:11:57,769 --> 00:12:01,000
on the message so that they know that
after out

205
00:12:01,000 --> 00:12:04,170
certain amana seconds the message is not
really a fan of

206
00:12:04,170 --> 00:12:08,010
and and it should not be deliver because
what happens underside

207
00:12:08,010 --> 00:12:11,899
is dad once you send a message did not
try to keep retrying

208
00:12:11,899 --> 00:12:15,649
to deliver the message out to the phone
until they finally

209
00:12:15,649 --> 00:12:19,279
sexy surfers were not talk

210
00:12:19,279 --> 00:12:23,089
I about the specifics of the Apple
implementation

211
00:12:23,089 --> 00:12:27,610
so what you need to get started are I
and II was out that's running on the

212
00:12:27,610 --> 00:12:29,700
phone number and tell you a little bit
about

213
00:12:29,700 --> 00:12:32,709
I mean white that's a an important
component

214
00:12:32,709 --> 00:12:36,480
you can eat out provisioning profile
which is something specific to

215
00:12:36,480 --> 00:12:39,820
are you create your app are you gonna
need a certificate that i'm gonna

216
00:12:39,820 --> 00:12:41,040
describe bob

217
00:12:41,040 --> 00:12:44,720
how do you get it and then you're gonna
need your device tokens

218
00:12:44,720 --> 00:12:49,279
I and the device the way you get device
token it very similar both on the Apple

219
00:12:49,279 --> 00:12:51,680
and Google Sites only gonna described

220
00:12:51,680 --> 00:12:54,990
I year and on on on the Apple site

221
00:12:54,990 --> 00:13:00,459
and you need to have a lot of course
which is up your message

222
00:13:00,459 --> 00:13:03,769
so how do you get the certificate
process is not

223
00:13:03,769 --> 00:13:06,779
%ah very different from getting a normal
now as

224
00:13:06,779 --> 00:13:09,959
felt certificate I it's just that it's
tied 2-yard

225
00:13:09,959 --> 00:13:14,230
to your I'll as application so you
basically generate out certificate

226
00:13:14,230 --> 00:13:15,149
request

227
00:13:15,149 --> 00:13:19,180
you go to the Apple website job where
you have your app register

228
00:13:19,180 --> 00:13:22,510
you upload your certificate request you
tie it to your

229
00:13:22,510 --> 00:13:25,930
you up I D and then you generate your

230
00:13:25,930 --> 00:13:29,350
I your certificates from the Apple
website and then

231
00:13:29,350 --> 00:13:33,190
with those a difficult %ah you put them
on your service and we'll see

232
00:13:33,190 --> 00:13:36,370
now in a little bit when you're
implementing I am

233
00:13:36,370 --> 00:13:40,019
how your service needs to present those
credentials basically

234
00:13:40,019 --> 00:13:43,510
to the Apple service before make it can
start sending

235
00:13:43,510 --> 00:13:46,829
up push notifications

236
00:13:46,829 --> 00:13:52,269
Phil moving into the device token the
device token is basically I'm

237
00:13:52,269 --> 00:13:56,579
you can think of it as an IP address and
sorrow like an address

238
00:13:56,579 --> 00:14:00,310
that Apple assigning a specific ap

239
00:14:00,310 --> 00:14:03,660
on a specific device so it's it's both a
combination

240
00:14:03,660 --> 00:14:09,209
of a specific phone so my iPhone and my
specific app to let say my UPS out

241
00:14:09,209 --> 00:14:10,209
that's gonna want me

242
00:14:10,209 --> 00:14:14,350
when my package finally gets delivered
%ah sadat's the device token

243
00:14:14,350 --> 00:14:18,029
and the device token needs to be
obtained specific to the Vice

244
00:14:18,029 --> 00:14:21,310
in needs to be obtained on the device so
the actual

245
00:14:21,310 --> 00:14:24,860
out bringing your phone I do your
Android app for your I'll asap

246
00:14:24,860 --> 00:14:29,600
it's the one the ones in it against
install and and used for the first time

247
00:14:29,600 --> 00:14:32,699
it has to go and negotiate that device
token

248
00:14:32,699 --> 00:14:36,269
Wed the the Apple platform or the Google
platform

249
00:14:36,269 --> 00:14:41,180
and then get that device token any needs
to send it back to your service

250
00:14:41,180 --> 00:14:45,490
hot so that you can keep track of the
devices and and and be able to send a

251
00:14:45,490 --> 00:14:46,630
message

252
00:14:46,630 --> 00:14:51,730
so that's a I'll a little bit a
complicated part in this diagram covers

253
00:14:51,730 --> 00:14:56,550
I'm how that happens so it's the device
the one to negotiate talking

254
00:14:56,550 --> 00:15:00,470
then independently it has to send that
talking back to you

255
00:15:00,470 --> 00:15:04,690
so that you can address that device
directly

256
00:15:04,690 --> 00:15:09,170
and then I'm up to you have your your
toe can stain you need to

257
00:15:09,170 --> 00:15:12,940
tube speak directly to the actual arm
Apple server

258
00:15:12,940 --> 00:15:16,720
and that's done chewed out the socket
child I describe

259
00:15:16,720 --> 00:15:19,940
using the certificates IJ's previously
generated

260
00:15:19,940 --> 00:15:23,260
out so it's just it's a normal I am

261
00:15:23,260 --> 00:15:26,380
known come trust communication %ah as

262
00:15:26,380 --> 00:15:30,660
you would do anything TCP IP connection
to their certificate on the Apple site

263
00:15:30,660 --> 00:15:34,430
is a certificate on your side and then
you both validate

264
00:15:34,430 --> 00:15:37,870
the out in city of those certificates
before you start

265
00:15:37,870 --> 00:15:41,120
doing your your arm

266
00:15:41,120 --> 00:15:44,350
you start sending messages an apple
stars are

267
00:15:44,350 --> 00:15:47,990
delivering your results of those missed

268
00:15:47,990 --> 00:15:51,230
the best way to do by far I

269
00:15:51,230 --> 00:15:55,149
a push notifications on pipe on 8 Sep
%uh palo back its cold

270
00:15:55,149 --> 00:15:59,529
hi apne and by AP a lot by AP an ass

271
00:15:59,529 --> 00:16:02,860
I and by AP an ass job aid

272
00:16:02,860 --> 00:16:06,100
handles all the socket connection for
you it handles all the

273
00:16:06,100 --> 00:16:09,660
day SSL negotiation for you and makes
writing

274
00:16:09,660 --> 00:16:13,480
that code really was a simple you can go
out and find

275
00:16:13,480 --> 00:16:17,500
let's say you have a Django's harbors
out there's like django packages to try

276
00:16:17,500 --> 00:16:18,550
to do this

277
00:16:18,550 --> 00:16:22,610
i'd don't recommend you do that because
since this is a socket connection

278
00:16:22,610 --> 00:16:27,149
%ah both for simplicity reasons and for
its Kayla Billy reasons and we're gonna

279
00:16:27,149 --> 00:16:28,279
talk a little bit about it

280
00:16:28,279 --> 00:16:32,529
of and a couple slides it's better to
have this as a separate process

281
00:16:32,529 --> 00:16:37,420
and you can ride with pie APNs I a
little bit more efficient by PN as

282
00:16:37,420 --> 00:16:40,949
the sources up and get Hobbes and you
can download you can peep inside

283
00:16:40,949 --> 00:16:44,410
and its it in the cheese shop

284
00:16:44,410 --> 00:16:47,850
so this is the actual code oh how I love
how you send

285
00:16:47,850 --> 00:16:51,579
ahh I you style is your connection with
the Apple server

286
00:16:51,579 --> 00:16:55,269
this again the the Apple site with up by
AP an ass

287
00:16:55,269 --> 00:16:58,290
so as you can see is really simple you
give it %ah

288
00:16:58,290 --> 00:17:02,149
some books parametered that by default
is true and whatnot

289
00:17:02,149 --> 00:17:06,679
%ah what that means is it tells object
that by AP and as

290
00:17:06,679 --> 00:17:09,730
which server to address when you when
you create your

291
00:17:09,730 --> 00:17:14,059
push notification profile on the Apple
website Apple create a proper boast on

292
00:17:14,059 --> 00:17:15,140
their test servers

293
00:17:15,140 --> 00:17:18,390
and on their production servers so you
can a you can use

294
00:17:18,390 --> 00:17:22,069
up both depending on the pure testing or
if you're already in production

295
00:17:22,069 --> 00:17:25,839
so by by making that furnace out use
sandbox

296
00:17:25,839 --> 00:17:29,220
compass to I'm telling by AP and as hey

297
00:17:29,220 --> 00:17:33,240
just right ahead dat test servers so
that we can do some

298
00:17:33,240 --> 00:17:36,490
some testing on on push notifications
and then

299
00:17:36,490 --> 00:17:39,990
I give it that path who might certain
file

300
00:17:39,990 --> 00:17:45,350
and to Mikey so that it can negotiate
the trust with the absurd

301
00:17:45,350 --> 00:17:48,840
and then a after Don Dada I have two
options the first in the simplest option

302
00:17:48,840 --> 00:17:49,480
is just

303
00:17:49,480 --> 00:17:52,570
San a single message and a single
message

304
00:17:52,570 --> 00:17:56,250
you have to use up the token token is
died number

305
00:17:56,250 --> 00:17:59,590
that address that I got from the device
sorted by

306
00:17:59,590 --> 00:18:02,780
obtain dot token and send it to my
server so i'd

307
00:18:02,780 --> 00:18:06,520
I touch it from my data store and I use
a token

308
00:18:06,520 --> 00:18:10,580
to send my actual message and then the
bailout here I'm using a very simple

309
00:18:10,580 --> 00:18:11,390
payload

310
00:18:11,390 --> 00:18:15,419
on is using a hello world %ah that's not
show up on the phone and

311
00:18:15,419 --> 00:18:20,039
Mb but you can use I more complicated
the load and there's

312
00:18:20,039 --> 00:18:23,179
there's ways to doing that I'm just
showing you did

313
00:18:23,179 --> 00:18:27,179
simplest case i cant also and this is
that

314
00:18:27,179 --> 00:18:31,610
a really cool thing on on by AP in as I
can also send multiple push

315
00:18:31,610 --> 00:18:32,650
notifications

316
00:18:32,650 --> 00:18:37,030
%ah out on the same time up taking a ban
internet connection that's already

317
00:18:37,030 --> 00:18:37,929
established

318
00:18:37,929 --> 00:18:42,320
out for dot by PSU something at school a
frame so I have to do is

319
00:18:42,320 --> 00:18:46,860
add items to my frame n each I am it's
going to be %ah

320
00:18:46,860 --> 00:18:51,490
message cell edge item has the exact
same components as in our message

321
00:18:51,490 --> 00:18:55,260
it has a token I it has a up a load and
then

322
00:18:55,260 --> 00:18:58,700
you can specify more advance job

323
00:18:58,700 --> 00:19:02,289
browner's like the expiration that I
spoke about a little bit

324
00:19:02,289 --> 00:19:06,520
that tells the server for how many
seconds to keep that message

325
00:19:06,520 --> 00:19:10,299
and nails so the priority in case you
have multiple message

326
00:19:10,299 --> 00:19:14,340
you can't stop the priority I if there's
messages that are more important than

327
00:19:14,340 --> 00:19:18,840
dollars I just basically once the frame
is constructed

328
00:19:18,840 --> 00:19:23,549
descended and then by PN as in Taunton
enough to reuse the socket connection

329
00:19:23,549 --> 00:19:24,870
that's already stylish

330
00:19:24,870 --> 00:19:27,900
to send all the mess all those messages
once

331
00:19:27,900 --> 00:19:31,309
I'm and this slide its little bit of

332
00:19:31,309 --> 00:19:35,470
I love a high level architecture how I
recommend you try to

333
00:19:35,470 --> 00:19:39,559
ob I am arc de Cure your service

334
00:19:39,559 --> 00:19:43,350
they said ideally you won your pot year
by AP and has to be running on a

335
00:19:43,350 --> 00:19:44,000
separate

336
00:19:44,000 --> 00:19:47,460
are it doesn't have to be a separate
service but separate from like your web

337
00:19:47,460 --> 00:19:49,690
server or your web application

338
00:19:49,690 --> 00:19:53,059
and then ideally what you could do is
Yuki create Hughes

339
00:19:53,059 --> 00:19:56,470
on your data store that every time an
event happens there needs to be

340
00:19:56,470 --> 00:19:58,419
communicated to the user

341
00:19:58,419 --> 00:20:01,590
to a push notification are those workers

342
00:20:01,590 --> 00:20:04,950
does does sorry that doesn't matter just
get put on the Q

343
00:20:04,950 --> 00:20:09,289
and then you can have a group of workers
and that can allow you to scale

344
00:20:09,289 --> 00:20:13,799
to to I'm massive I am massive size

345
00:20:13,799 --> 00:20:17,070
if you need to I you have different
workers

346
00:20:17,070 --> 00:20:21,230
that get work from dot you and then send
the messages

347
00:20:21,230 --> 00:20:24,760
to to the Apple or Google server this
architecture applies

348
00:20:24,760 --> 00:20:27,870
%ah across-the-board outsell

349
00:20:27,870 --> 00:20:31,419
now where you have a I a queuing system

350
00:20:31,419 --> 00:20:34,929
your messages get delivered to the same
socket connection

351
00:20:34,929 --> 00:20:38,789
you are using your resources being able
to send more messages

352
00:20:38,789 --> 00:20:42,030
with the same connection and that's
gonna make you serve as a lot more

353
00:20:42,030 --> 00:20:42,580
efficient

354
00:20:42,580 --> 00:20:46,520
and value %uh they said out to scale a
lot better

355
00:20:46,520 --> 00:20:51,720
then did you try you something like a
general packager or something

356
00:20:51,720 --> 00:20:55,409
on oMG I'm switch gears a little bit and
I'm going to go to the glove side

357
00:20:55,409 --> 00:20:58,340
a lot of the stuff that we just talked
about on the Apple site applies to

358
00:20:58,340 --> 00:20:59,299
Google as well

359
00:20:59,299 --> 00:21:03,659
the its it just has its own lil ob

360
00:21:03,659 --> 00:21:08,370
specifics but the same process applies
for negotiating tokens

361
00:21:08,370 --> 00:21:11,419
and and negotiating trust between the

362
00:21:11,419 --> 00:21:15,760
odd the servers the thing is on the
Google site is a little bit easier

363
00:21:15,760 --> 00:21:18,840
since I am says this is

364
00:21:18,840 --> 00:21:24,210
%ah an HTTP connection or on the XMPP
side since is again sockets

365
00:21:24,210 --> 00:21:28,860
get saluted more complicated again but
an XMPP it's a protocol that is widely

366
00:21:28,860 --> 00:21:29,900
distributed

367
00:21:29,900 --> 00:21:33,870
hot so there's a lot of libraries in a
lot of documentation to make it

368
00:21:33,870 --> 00:21:37,530
up easier to to implement so on an
underside

369
00:21:37,530 --> 00:21:41,100
it seems like you need a lot more but
most have dollars job

370
00:21:41,100 --> 00:21:44,559
ID's are things that you get item from
the Google Website when you register

371
00:21:44,559 --> 00:21:45,470
your service

372
00:21:45,470 --> 00:21:49,240
are or again the device token that you
get from there the eighty there's only

373
00:21:49,240 --> 00:21:53,130
one thing that you need and his did you
mean a Google user ID so

374
00:21:53,130 --> 00:21:56,190
anybody that has an Android phone by
default has a

375
00:21:56,190 --> 00:21:59,669
a google account but you need to capture
that account in order to be able to send

376
00:21:59,669 --> 00:22:00,270
them

377
00:22:00,270 --> 00:22:05,650
%ah notifications easy Emma they said in
the beginning as to implementation

378
00:22:05,650 --> 00:22:06,929
there's a very simple

379
00:22:06,929 --> 00:22:11,450
ACP job implementation that is just a
REST API

380
00:22:11,450 --> 00:22:16,440
and there's the XMPP implementation I'm
not gonna go into details of the HTTP

381
00:22:16,440 --> 00:22:17,980
it's really simple to

382
00:22:17,980 --> 00:22:21,929
to implement I'm gonna talk about to
service in the end

383
00:22:21,929 --> 00:22:24,950
that are similar so there's gonna be
some code that

384
00:22:24,950 --> 00:22:28,010
that would apply to using the the HTTP
side

385
00:22:28,010 --> 00:22:31,559
I'm not talk more about the XMPP version

386
00:22:31,559 --> 00:22:36,690
that's a little bit more interesting
I'll so ago way to do it is using

387
00:22:36,690 --> 00:22:40,740
hours leak XMPP which is again in our
fight library that's in the Chi shode

388
00:22:40,740 --> 00:22:41,830
you can be been solid

389
00:22:41,830 --> 00:22:45,200
are you can job look at the source code
on GitHub

390
00:22:45,200 --> 00:22:49,870
op but it's not the only 1i they said
XMPP have been around for a long time

391
00:22:49,870 --> 00:22:53,340
there's a lot of libraries a lot of
options a lot of implementation

392
00:22:53,340 --> 00:22:58,130
I believe some %uh view my have already
used it so you might have your own

393
00:22:58,130 --> 00:23:01,470
preference of what you want to use I but
that's the a man is in

394
00:23:01,470 --> 00:23:04,630
on the Google side %ah that they use
something that

395
00:23:04,630 --> 00:23:09,169
that were used to entity just pick up
little you already have

396
00:23:09,169 --> 00:23:13,620
I'd recommend this one because it makes
again the code really easy

397
00:23:13,620 --> 00:23:16,760
so this is how you solve the connection
again

398
00:23:16,760 --> 00:23:20,740
you just imported package create decline
XMPP

399
00:23:20,740 --> 00:23:24,090
given the dad your API keys give a day

400
00:23:24,090 --> 00:23:27,679
the Google address %ah you have to use
date uses el

401
00:23:27,679 --> 00:23:32,250
equals to you August who if you don't
know what's gonna reactor connection

402
00:23:32,250 --> 00:23:35,480
and that's it you have your XMPP
connections dollars

403
00:23:35,480 --> 00:23:39,919
and then XMPP the chat pro decal so
messages are gonna be coming back and

404
00:23:39,919 --> 00:23:40,860
forth

405
00:23:40,860 --> 00:23:45,529
the biggest downside job for me and at
least is that XMPP is base on

406
00:23:45,529 --> 00:23:49,750
on XML so all your messages are gonna be
wrapped in XML

407
00:23:49,750 --> 00:23:53,059
odd so that's my major payload bigger
and it's there's

408
00:23:53,059 --> 00:23:56,799
you you don't really i mean you have to
part said there's a lot of external

409
00:23:56,799 --> 00:23:57,900
parts is out there

410
00:23:57,900 --> 00:24:01,350
I just think is a downside since using
jason is so easy

411
00:24:01,350 --> 00:24:05,929
now we have this extra layer of other
XML on top of our messages

412
00:24:05,929 --> 00:24:09,909
but i think is nice the globalized as
days out camp chat for a cool

413
00:24:09,909 --> 00:24:13,049
the biggest advantage by far as stat

414
00:24:13,049 --> 00:24:17,909
the XMPP protocol it's a two-way Prada
khalsa push notifications usually work

415
00:24:17,909 --> 00:24:19,980
from the server to the device

416
00:24:19,980 --> 00:24:23,190
up but up using XMPP you can

417
00:24:23,190 --> 00:24:26,870
send messages from the device to the
server and died

418
00:24:26,870 --> 00:24:30,090
opens up a whole new I'll range up
scenarios

419
00:24:30,090 --> 00:24:33,490
that you don't have princeton's on the
Apple site or at least

420
00:24:33,490 --> 00:24:38,350
not not us straightforward as you do on
the cool side

421
00:24:38,350 --> 00:24:41,779
%ah as you can see it's relatively easy
depending on the

422
00:24:41,779 --> 00:24:44,960
on the livor did you choose but it's a
little bit papal

423
00:24:44,960 --> 00:24:48,750
so fortunately there's two up providers
out there

424
00:24:48,750 --> 00:24:52,679
and I'm just government mentioned it to
them Miller Wed

425
00:24:52,679 --> 00:24:57,200
they have really good solutions dead
dropped a little bit of this complexity

426
00:24:57,200 --> 00:25:00,659
and and make make city make make it
easier to to

427
00:25:00,659 --> 00:25:05,210
implement push especially using pipe oz
in the first one is sparse

428
00:25:05,210 --> 00:25:08,400
of parts got acquired by Facebook about
a year ago

429
00:25:08,400 --> 00:25:13,330
%ah they do a lot more them push push is
not their main business day

430
00:25:13,330 --> 00:25:17,179
they're basically out there said
business basically out free back in for

431
00:25:17,179 --> 00:25:18,159
mobile developers

432
00:25:18,159 --> 00:25:21,980
so they let you store %ah the alleged
store

433
00:25:21,980 --> 00:25:25,650
job objects and a bunch of other stuff
but they do push

434
00:25:25,650 --> 00:25:29,120
on top they have pressed my firm is the
Cayenne

435
00:25:29,120 --> 00:25:33,840
the way they do push notifications is
sure SAPI

436
00:25:33,840 --> 00:25:38,730
so it's really easy you can use I'm
using HTTP Live exam trying to keep it

437
00:25:38,730 --> 00:25:41,809
that their lowest common denominator for
you can use

438
00:25:41,809 --> 00:25:45,230
your live do or any other %ah ACP

439
00:25:45,230 --> 00:25:49,529
michael i read your comfort comfortable
with is just a POST request

440
00:25:49,529 --> 00:25:54,610
that you issue against that that I'm
parser burger

441
00:25:54,610 --> 00:25:58,480
you make a connection you send the
request their request again it's just

442
00:25:58,480 --> 00:25:59,640
Jason data

443
00:25:59,640 --> 00:26:03,330
%ah I'm using dictionaries here but all
that gets married to

444
00:26:03,330 --> 00:26:08,010
to Jason you send the gate and eat over
you can said you had urs your hairs have

445
00:26:08,010 --> 00:26:08,620
to have

446
00:26:08,620 --> 00:26:12,120
out specific tokens said you get from
the service and then you

447
00:26:12,120 --> 00:26:15,770
just send that and then you get back
again Jason data

448
00:26:15,770 --> 00:26:20,250
out from buyers and then fires handles
everything for you and sense the push

449
00:26:20,250 --> 00:26:21,460
notifications to

450
00:26:21,460 --> 00:26:25,200
to the devices there's a few downsides
with pars

451
00:26:25,200 --> 00:26:28,549
I'm not I mean they're great service

452
00:26:28,549 --> 00:26:31,600
at this is just my experience of

453
00:26:31,600 --> 00:26:34,990
and my limited experience cell hot they
have a

454
00:26:34,990 --> 00:26:38,770
they don't have an official pipe as the
Kani thing for me that's downside

455
00:26:38,770 --> 00:26:42,440
we're all fighting developers so they
have a I've bite and as the cato they

456
00:26:42,440 --> 00:26:44,909
recommend but its is not very good

457
00:26:44,909 --> 00:26:48,830
%ah and then there they have some issues
on the mall site and reliability

458
00:26:48,830 --> 00:26:52,240
%ah so thats that something to to be
wary of

459
00:26:52,240 --> 00:26:55,320
but they're working really hard and
they've come a long way so the

460
00:26:55,320 --> 00:26:59,150
there a really really good option if you
want out abstract all the complexity of

461
00:26:59,150 --> 00:27:00,909
the different providers

462
00:27:00,909 --> 00:27:05,140
and no one is Urban Airship %ah there
really great they have an official

463
00:27:05,140 --> 00:27:07,480
python is the case that is great

464
00:27:07,480 --> 00:27:10,970
I think on how great the SDK is it's
that maybe

465
00:27:10,970 --> 00:27:14,679
the only one out that that the one
implies doesn't look as good

466
00:27:14,679 --> 00:27:18,409
up but there is the case great they have
was poppin support

467
00:27:18,409 --> 00:27:21,539
and out its it's again a simple rest

468
00:27:21,539 --> 00:27:25,140
up API to desist how you implemented

469
00:27:25,140 --> 00:27:29,149
again is really simple you can see that
the API's really clean

470
00:27:29,149 --> 00:27:32,880
and this is how you send a message to
all types of devices

471
00:27:32,880 --> 00:27:36,270
%ah and this is a very simple miss you
see that I'll have to do the gate on

472
00:27:36,270 --> 00:27:39,570
on my own like a hat on on on pars so
it's

473
00:27:39,570 --> 00:27:44,250
it's really really so in summary

474
00:27:44,250 --> 00:27:47,600
I I wanted to

475
00:27:47,600 --> 00:27:50,740
out thing to pitch in a little bit of
how mobile is

476
00:27:50,740 --> 00:27:54,649
basically eating the world I if you're
not doing mole you're probably thinking

477
00:27:54,649 --> 00:27:56,140
about doing mall also

478
00:27:56,140 --> 00:27:59,890
when you're planning to go your most
Reidy you have to think about

479
00:27:59,890 --> 00:28:03,850
push notifications as a way to
communicate with users I am

480
00:28:03,850 --> 00:28:08,110
it will make your servers smarty you
will be able to deliver information

481
00:28:08,110 --> 00:28:11,669
at the time that the user needed it'll
be really personalize another bite at

482
00:28:11,669 --> 00:28:12,789
the user carries

483
00:28:12,789 --> 00:28:16,380
and it will make your service up more
more personal to

484
00:28:16,380 --> 00:28:20,010
to the user and finally doing to them by
honeys easy

485
00:28:20,010 --> 00:28:23,279
uses up a standard protocols and

486
00:28:23,279 --> 00:28:26,380
and the implementation details are are
not the heart

487
00:28:26,380 --> 00:28:30,340
and we all have tools are ready for for
a lot of this stuff

488
00:28:30,340 --> 00:28:33,350
cell that's kinda why why wanna talk
about

489
00:28:33,350 --> 00:28:37,309
up hopefully you got just a bit

490
00:28:37,309 --> 00:28:40,470
and and especially you got curious about
it gotta go

491
00:28:40,470 --> 00:28:44,289
home and look at some other stuff
somebody's project and and try to do it

492
00:28:44,289 --> 00:28:44,890
on your own

493
00:28:44,890 --> 00:28:49,460
hopefully we'll see a lot more services
offering push in the future

494
00:28:49,460 --> 00:28:56,460
thank you

495
00:28:57,240 --> 00:28:59,850
so I think we have time for a job couple
questions

496
00:28:59,850 --> 00:29:04,910
so someone wants to come up to them yeah
you can come up to the mic and

497
00:29:04,910 --> 00:29:08,910
yeah this attack our ives

498
00:29:08,910 --> 00:29:12,530
Chiesi it seems like you briefly
mentioned how

499
00:29:12,530 --> 00:29:15,570
there's no guarantees

500
00:29:15,570 --> 00:29:19,720
that push notifications being delivered
now I was wondering what pic cases are

501
00:29:19,720 --> 00:29:21,150
where they're not delivered in

502
00:29:21,150 --> 00:29:24,150
half Rican that is in what people should
be aware of

503
00:29:24,150 --> 00:29:27,660
our unfortunately is more frequent than
I would like

504
00:29:27,660 --> 00:29:30,900
it's getting better at at both have
their services %ah

505
00:29:30,900 --> 00:29:34,270
get more mature %ah but there's

506
00:29:34,270 --> 00:29:39,550
there's a little models by I mean by
their own nature are not as reliable as

507
00:29:39,550 --> 00:29:42,810
as any desktop so from tel could be of

508
00:29:42,810 --> 00:29:46,810
could be out of service coverage our
data connectivity could not be good

509
00:29:46,810 --> 00:29:50,030
I love us know that app crashes on

510
00:29:50,030 --> 00:29:53,450
your asking price in your phone at any
time for many different reasons

511
00:29:53,450 --> 00:29:56,880
you have memory issues so dozers some

512
00:29:56,880 --> 00:30:00,570
are that's in a reason which you could
lose up wid

513
00:30:00,570 --> 00:30:03,650
but it's getting better and the fact
that we have expirations they it

514
00:30:03,650 --> 00:30:08,450
spiritually time now and and a couple
into a working really hard to make this

515
00:30:08,450 --> 00:30:11,470
problem go away but it's something to be
wary about

516
00:30:11,470 --> 00:30:14,700
is not not out completely

517
00:30:14,700 --> 00:30:17,830
a complete show stopper by something to
be to be I'll

518
00:30:17,830 --> 00:30:21,040
is sorry to follow up really quick but
is there

519
00:30:21,040 --> 00:30:24,080
am throttling word

520
00:30:24,080 --> 00:30:27,710
abuse checks richer which might lead to

521
00:30:27,710 --> 00:30:32,090
are there is a both sides a non-apple
you you can send more than a hundred

522
00:30:32,090 --> 00:30:32,820
Methodism

523
00:30:32,820 --> 00:30:35,880
one push like one connection

524
00:30:35,880 --> 00:30:41,010
I but that's about it I mean you can san
andreas close it's an art 100

525
00:30:41,010 --> 00:30:44,340
its not so much restrictions I
restriction again

526
00:30:44,340 --> 00:30:47,840
abuse I think the abuse far goes more on
the

527
00:30:47,840 --> 00:30:51,350
Apple policing since they have to
approve your app before they posted they

528
00:30:51,350 --> 00:30:52,520
police how you do

529
00:30:52,520 --> 00:30:55,600
push notifications on Android is a lot
more

530
00:30:55,600 --> 00:31:00,300
there's a lot more freedom up but I I
have really seen people abusing it done

531
00:31:00,300 --> 00:31:03,320
I'm thanks okay

532
00:31:03,320 --> 00:31:07,630
I want greater talk I this question
might be out of scope for what you just

533
00:31:07,630 --> 00:31:08,530
discussed but

534
00:31:08,530 --> 00:31:11,810
you discussed a few libraries for

535
00:31:11,810 --> 00:31:15,370
don't push notifications for pipe on for
mobile development

536
00:31:15,370 --> 00:31:18,550
arm I'm curious if you know of the top
your head good live

537
00:31:18,550 --> 00:31:23,950
good Python libraries for like
non-mobile development on

538
00:31:23,950 --> 00:31:27,320
for put for push notifications no those

539
00:31:27,320 --> 00:31:30,920
are well those two sir for bush

540
00:31:30,920 --> 00:31:34,310
up do you mean for selling pushed to the
desktop

541
00:31:34,310 --> 00:31:38,210
yes well I think there's a fight wish
for Apple

542
00:31:38,210 --> 00:31:42,420
works exactly the same as as as firm
also

543
00:31:42,420 --> 00:31:46,570
the seeing live reply at the end as well
will give you a job

544
00:31:46,570 --> 00:31:49,720
so if I presented and eventually we're
at a time so

545
00:31:49,720 --> 00:31:52,960
thank you very much again for coming and
and I'm gonna stay here and

546
00:31:52,960 --> 00:31:55,700
around the conference if you have any
questions thanks again


1
00:00:00,010 --> 00:00:03,570
hope you enjoyed your first full day of
talks last talks love this room

2
00:00:03,570 --> 00:00:09,030
I had like to present a gram double din
who generously offered to fill the slot

3
00:00:09,030 --> 00:00:09,980
on very short notice

4
00:00:09,980 --> 00:00:13,730
he is the author of some stuff for you
may want to use called mother WSUI

5
00:00:13,730 --> 00:00:17,279
and he is currently a senior engineer at
your elec and he's going to beat

6
00:00:17,279 --> 00:00:19,980
speaking to us night about the best
methods for creating the creators

7
00:00:19,980 --> 00:00:26,980
let's give a warm welcome okay

8
00:00:29,500 --> 00:00:34,040
before I get started this it this is a
talk I have done before which is what

9
00:00:34,040 --> 00:00:35,690
managed to just drop into the spot

10
00:00:35,690 --> 00:00:39,309
pretty quick I've presented New Zealand
park on

11
00:00:39,309 --> 00:00:45,950
last year on I had put in is a proposal
for this conference bit can get accepted

12
00:00:45,950 --> 00:00:48,899
and if you followed my blog he would
have known i

13
00:00:48,899 --> 00:00:52,070
to the huge blog post series beginning
to you about this topic

14
00:00:52,070 --> 00:00:55,149
and such I'll see something quite
passionate about

15
00:00:55,149 --> 00:00:58,699
and it's an interesting topic reaction

16
00:00:58,699 --> 00:01:03,520
on you get from it and because I select
gay way beyond a

17
00:01:03,520 --> 00:01:07,680
normal way that people usually brought
decorators I I sorta

18
00:01:07,680 --> 00:01:12,890
all gonna lose people in in what I'm
describing because it's %uh much more

19
00:01:12,890 --> 00:01:14,299
complicated what they're expecting

20
00:01:14,299 --> 00:01:18,799
I get a read on the reactions of why do
I care about all this detail why do I

21
00:01:18,799 --> 00:01:19,500
need to know

22
00:01:19,500 --> 00:01:24,229
the way I had do it now were I don't
quite think it does

23
00:01:24,229 --> 00:01:28,220
which is Parliament explaining an so

24
00:01:28,220 --> 00:01:32,470
thing to take away from any guesses if
the don't quite understand it

25
00:01:32,470 --> 00:01:36,119
an why i think is really good about what
I'm doing

26
00:01:36,119 --> 00:01:40,130
in this and what i doing in the block is
set I'm not doing what a lot of people

27
00:01:40,130 --> 00:01:41,170
do when they

28
00:01:41,170 --> 00:01:44,600
they talk about a topic like decorators
you get a lot of blood processing

29
00:01:44,600 --> 00:01:48,619
Hey look I've went in understood
decorators on the weekend this is what

30
00:01:48,619 --> 00:01:49,210
they are

31
00:01:49,210 --> 00:01:53,369
and I'll explain in a few paragraphs and
I think that elect to it and

32
00:01:53,369 --> 00:01:57,439
I like to go beyond that and I'll I like
tea

33
00:01:57,439 --> 00:02:01,409
create a story about how I got to that
solution

34
00:02:01,409 --> 00:02:05,119
are what something how it works

35
00:02:05,119 --> 00:02:09,860
so if this final a few devotee blog
posting yourself

36
00:02:09,860 --> 00:02:14,480
are really really think I should do that
don't just say I worked this out this a

37
00:02:14,480 --> 00:02:15,230
solution

38
00:02:15,230 --> 00:02:18,310
describe the journey you went on to get
there

39
00:02:18,310 --> 00:02:21,480
exit really interesting to read that

40
00:02:21,480 --> 00:02:24,599
when people come along too ida

41
00:02:24,599 --> 00:02:28,230
and if take anything away from that you
don't understand what I'm talking about

42
00:02:28,230 --> 00:02:29,530
please at least

43
00:02:29,530 --> 00:02:35,500
do that and I hope you enjoy my story on
this one so

44
00:02:35,500 --> 00:02:38,739
I should mention of the cult in my eyes
to talk to morning

45
00:02:38,739 --> 00:02:42,400
under courageous so he's covered a lot
of really basic stuff here

46
00:02:42,400 --> 00:02:45,760
I'm nice what he's talking about sorta
that's my

47
00:02:45,760 --> 00:02:49,360
this three or four slots and I get into
the hottest up

48
00:02:49,360 --> 00:02:55,430
so this is just a quick recap cotton was
talking about to aviation never written

49
00:02:55,430 --> 00:02:56,540
your and decorator

50
00:02:56,540 --> 00:02:59,690
ninety if any Houston you would know
that x-rays from

51
00:02:59,690 --> 00:03:02,920
from at symbol used to prefix usage

52
00:03:02,920 --> 00:03:06,550
the at symbol here though is little more
than see

53
00:03:06,550 --> 00:03:09,599
tactic sugar one can do the same thing

54
00:03:09,599 --> 00:03:13,239
invoking the decorator function
explicitly parking

55
00:03:13,239 --> 00:03:16,819
passing in the function to be decorated
and replacing the original with the

56
00:03:16,819 --> 00:03:17,510
result

57
00:03:17,510 --> 00:03:21,269
in fact this is what you had to do
before the decorated syntex was

58
00:03:21,269 --> 00:03:22,959
introduced in Python 2.4

59
00:03:22,959 --> 00:03:27,450
to decorate a syntax is there for just a
shorthand way

60
00:03:27,450 --> 00:03:30,879
being able to apply rapper around in
existing function

61
00:03:30,879 --> 00:03:34,650
or otherwise modifying the existing
function in place

62
00:03:34,650 --> 00:03:40,810
while the definition of to function is
being set up tomorrow illustrative way

63
00:03:40,810 --> 00:03:42,640
of showing how rapid works

64
00:03:42,640 --> 00:03:46,220
to implement using a class object the
classic

65
00:03:46,220 --> 00:03:50,769
instance is initialized we've and
remembers the original function object

66
00:03:50,769 --> 00:03:53,810
when that now wrapped function is cold

67
00:03:53,810 --> 00:03:57,650
it is actually the underscore call
method up the wrapper object which is in

68
00:03:57,650 --> 00:03:58,189
fact

69
00:03:58,189 --> 00:04:01,599
this in 10 with 10 call the regional rep
function

70
00:04:01,599 --> 00:04:05,950
a pass for rapid isn't particularly
useful

71
00:04:05,950 --> 00:04:09,480
say normally you would actually want to
do some work either before or after the

72
00:04:09,480 --> 00:04:09,780
wreck

73
00:04:09,780 --> 00:04:13,930
functions call or you may want to modify
the input arguments

74
00:04:13,930 --> 00:04:19,729
all the result it's a posture the rapper
using a class to implement the wrapper

75
00:04:19,729 --> 00:04:21,919
for a decorated is an action that
popular

76
00:04:21,919 --> 00:04:25,380
instead a function closure is more often
use

77
00:04:25,380 --> 00:04:28,740
in this case in nested function is used
to the rapper

78
00:04:28,740 --> 00:04:33,300
and is that which is returned by the
decorator when an hour wrap

79
00:04:33,300 --> 00:04:37,009
function is called the nested function
is actually being called

80
00:04:37,009 --> 00:04:40,340
this in turn would gain call then call
the regional rep

81
00:04:40,340 --> 00:04:46,090
function in this situation the nested
function doesn't actually get past the

82
00:04:46,090 --> 00:04:46,880
regional rep

83
00:04:46,880 --> 00:04:51,130
function explicitly but he will still
have access to it by the arguments given

84
00:04:51,130 --> 00:04:53,290
to the at a function call

85
00:04:53,290 --> 00:04:56,620
just us away with the need to create a
class to hold what

86
00:04:56,620 --> 00:05:03,050
resurrect function and that's why is can
convenient and generally more popular

87
00:05:03,050 --> 00:05:06,979
now when we talk about functions we
expect this tend to specify properties

88
00:05:06,979 --> 00:05:08,169
which describe him

89
00:05:08,169 --> 00:05:12,400
as well as document what they do these
included underscore name

90
00:05:12,400 --> 00:05:16,360
and underscored doc attributes when Lee
is a rapid a

91
00:05:16,360 --> 00:05:20,880
this no longer works as we expect as in
the case of using a function closure

92
00:05:20,880 --> 00:05:25,620
the details of the next to function
returned

93
00:05:25,620 --> 00:05:29,840
if we use a class to implement the
rapper as poss instances do not normally

94
00:05:29,840 --> 00:05:31,430
have it done disc on a match

95
00:05:31,430 --> 00:05:35,410
be attempting to access the name is the
function will actually result in

96
00:05:35,410 --> 00:05:36,430
actually care

97
00:05:36,430 --> 00:05:41,380
exception the solution here when using a
function closure

98
00:05:41,380 --> 00:05:45,259
is to copy the XP to Pinterest from the
rap faction to the next to wrapper

99
00:05:45,259 --> 00:05:46,560
function

100
00:05:46,560 --> 00:05:50,320
this will then result in the function
name and documentation strings be

101
00:05:50,320 --> 00:05:53,210
incorrect

102
00:05:53,210 --> 00:05:56,419
needing to manually copy the attribute
is laborious

103
00:05:56,419 --> 00:06:00,340
and would need to be updated any for the
special attributes added which need to

104
00:06:00,340 --> 00:06:01,440
be copied

105
00:06:01,440 --> 00:06:05,550
for example we should also copy did
underscore much electrocute

106
00:06:05,550 --> 00:06:08,889
an imposter free did underscore call
name

107
00:06:08,889 --> 00:06:12,449
and underscore underscore annotations
attributes war

108
00:06:12,449 --> 00:06:17,370
added to aiding getting this right the
Python standard lobby provides the fun

109
00:06:17,370 --> 00:06:22,930
tools top bracket decorator was dust is
tough for you

110
00:06:22,930 --> 00:06:26,169
if using a class to implement the rapper
instead of two fun

111
00:06:26,169 --> 00:06:29,360
tolls top bracket decorator we would use
to fund

112
00:06:29,360 --> 00:06:33,819
Torstar update wrapper function instead

113
00:06:33,819 --> 00:06:37,090
so we've managed to fix up thing so that
the function name

114
00:06:37,090 --> 00:06:41,620
any documentation string is correct but
what if we want to query the occupants

115
00:06:41,620 --> 00:06:43,020
best cation

116
00:06:43,020 --> 00:06:47,139
this also files and instead of returning
the occupants best cation for the

117
00:06:47,139 --> 00:06:47,590
wrapped

118
00:06:47,590 --> 00:06:52,810
function every test that the rapper in
the case if using a function closure

119
00:06:52,810 --> 00:06:56,750
this is the nested function the
decorator is therefore

120
00:06:56,750 --> 00:07:01,360
not what we call signature preserving

121
00:07:01,360 --> 00:07:04,880
a worse situation again acres with the
class wrapper

122
00:07:04,880 --> 00:07:08,080
this Tommy getting exception complaining
that the rap

123
00:07:08,080 --> 00:07:11,479
function isn't actually a function as a
result

124
00:07:11,479 --> 00:07:15,199
it isn't possible to the right and i
cant specification at all

125
00:07:15,199 --> 00:07:20,639
a Van Nuys iraq function is actually
still callable

126
00:07:20,639 --> 00:07:24,490
now as well as normal functions
decorators can also be applied to the

127
00:07:24,490 --> 00:07:26,460
method to classes

128
00:07:26,460 --> 00:07:30,340
often even includes a couple have
special decorators cock

129
00:07:30,340 --> 00:07:34,479
class method and static method
converting normal instance methods

130
00:07:34,479 --> 00:07:38,900
into the special method types methods
have classes do provide a number of

131
00:07:38,900 --> 00:07:42,680
potential problem sir

132
00:07:42,680 --> 00:07:46,479
the first is that even if using thanked
All Star Trek pics of fact all tied up

133
00:07:46,479 --> 00:07:47,500
tight rapper

134
00:07:47,500 --> 00:07:50,569
in your decorator when a decorator is
applied around

135
00:07:50,569 --> 00:07:54,210
hospital static method it will fail an
exception

136
00:07:54,210 --> 00:07:57,449
this is because the rapid credit by
these did not have some in the

137
00:07:57,449 --> 00:07:58,539
attributes

138
00:07:58,539 --> 00:08:02,150
big cock it by Battlestar trappist and
rapper

139
00:08:02,150 --> 00:08:06,410
as it happens this is actually a pot to
pop and it's fixed in part for free

140
00:08:06,410 --> 00:08:10,289
by ignoring missing attributes

141
00:08:10,289 --> 00:08:13,690
if my run and opossum free we still have
trouble a

142
00:08:13,690 --> 00:08:18,940
this article is by Fragma types Shin at
the Rec functions directly callable

143
00:08:18,940 --> 00:08:23,440
this not actually be the case a rapt
function can actually be what is called

144
00:08:23,440 --> 00:08:27,190
scripta meaning that in order to get
back callable

145
00:08:27,190 --> 00:08:30,440
descriptor have to beat down correctly
to the instant

146
00:08:30,440 --> 00:08:35,979
first so all I decorate is using
function closures all

147
00:08:35,979 --> 00:08:40,479
ha strap it may appear to solve tough
tactics failing varies corner cases

148
00:08:40,479 --> 00:08:43,510
and also I don't do a very good job
preserving the ability

149
00:08:43,510 --> 00:08:47,519
to introspection the latter is a problem
for documentation tool

150
00:08:47,519 --> 00:08:53,500
ID's and also some performance
monitoring of profiling tools

151
00:08:53,500 --> 00:08:56,980
so let's go back now look at these
descriptors it's a turn at

152
00:08:56,980 --> 00:09:01,410
be a key mechanism in all it is a
descriptor is an object attribute

153
00:09:01,410 --> 00:09:06,760
with binding behavior one has attribute
access has been overridden by methods in

154
00:09:06,760 --> 00:09:07,010
the

155
00:09:07,000 --> 00:09:10,399
descriptor protocol this method
underscore get

156
00:09:10,399 --> 00:09:13,720
and the school said done totally if any
of those methods

157
00:09:13,720 --> 00:09:18,680
act on for object it is said to be a
descriptor

158
00:09:18,680 --> 00:09:22,200
what this means is that if actually be
the classes any is a special message

159
00:09:22,200 --> 00:09:23,180
define

160
00:09:23,180 --> 00:09:26,230
when the corresponding operation is
performed on that

161
00:09:26,230 --> 00:09:30,269
actually have class denies message will
be called instead of the

162
00:09:30,269 --> 00:09:33,269
default action this allows an actual bit

163
00:09:33,269 --> 00:09:38,550
over right how those operations are
going to work

164
00:09:38,550 --> 00:09:42,050
you may well be thinking that it never
used make the subdirectories

165
00:09:42,050 --> 00:09:48,060
but fact is that function object are
actually descriptors

166
00:09:48,060 --> 00:09:51,950
acid where functions region had a talk
last definition

167
00:09:51,950 --> 00:09:56,470
is a normal function when you access
that function using a DoS attack chippy

168
00:09:56,470 --> 00:09:59,700
pop your invoking the underscore get
method

169
00:09:59,700 --> 00:10:03,459
to find a function to the class instance
turning it into a

170
00:10:03,459 --> 00:10:07,190
found method of that object

171
00:10:07,190 --> 00:10:10,870
so when calling a method of a class that
is not the Thunder skolko method

172
00:10:10,870 --> 00:10:15,500
divisional function object it is cold
but the underscore home if it after

173
00:10:15,500 --> 00:10:17,070
temporary object

174
00:10:17,070 --> 00:10:21,170
that is crated as a result accessing the
function

175
00:10:21,170 --> 00:10:25,700
the problem with class method was that
is dependent on the descriptor protocol

176
00:10:25,700 --> 00:10:29,899
being applied astute underscore call
method annexes some the result

177
00:10:29,899 --> 00:10:34,850
returned by done disco que when it's
cold

178
00:10:34,850 --> 00:10:39,050
the way to solve this is for rappers to
also be descriptors

179
00:10:39,050 --> 00:10:42,060
to wrap it is applied to a normal
function the

180
00:10:42,060 --> 00:10:46,790
Dundas Coco method of the rapper's use
if the record is applied to mess it up

181
00:10:46,790 --> 00:10:47,899
clocks

182
00:10:47,899 --> 00:10:52,760
the Danisco K if it is called which
returns in Newtown rapper

183
00:10:52,760 --> 00:10:56,690
and the Dundas Coco message if that is
in fact instead

184
00:10:56,690 --> 00:11:00,510
to sell asap rapid to be used around
descriptors as a proper case the

185
00:11:00,510 --> 00:11:03,680
descriptor protocol

186
00:11:03,680 --> 00:11:07,709
sent using a function closure will
ultimately fail if used to read a

187
00:11:07,709 --> 00:11:08,470
decorator

188
00:11:08,470 --> 00:11:12,500
which is implemented as a descriptor the
situation we therefore have

189
00:11:12,500 --> 00:11:17,980
he said if we want everything to work
decoration always uses patent

190
00:11:17,980 --> 00:11:22,839
the question now is had a waitress the
other issues we had

191
00:11:22,839 --> 00:11:26,560
we solve painting using functional stop
practice in fact What's Up tech

192
00:11:26,560 --> 00:11:30,769
wrap it before but what do they do or
reckless chess users update

193
00:11:30,769 --> 00:11:35,040
wrap up so we just need to look at it
are shy ones imposter freed up free

194
00:11:35,040 --> 00:11:38,720
although that actually has Anna Paquin
as well which is fixed deposit free to

195
00:11:38,720 --> 00:11:40,779
fall

196
00:11:40,779 --> 00:11:44,320
casing to try remember is we try and
look at the body of the update wrapper

197
00:11:44,320 --> 00:11:45,620
function is what it is

198
00:11:45,620 --> 00:11:50,370
in these default bearable circuit past
as assigned an updated

199
00:11:50,370 --> 00:11:54,510
days in a sign what we were originally
manually assigning

200
00:11:54,510 --> 00:11:57,620
pasta mixtures that underscored d

201
00:11:57,620 --> 00:12:02,639
an update is something newsday's we need
to see what's happening with it

202
00:12:02,639 --> 00:12:06,220
looking at the body is a function free
thing to being done

203
00:12:06,220 --> 00:12:10,889
Fist of a reference to the wrapped
function saved it underscore apt

204
00:12:10,889 --> 00:12:14,790
this at the park is how it should be
done lost the second is to copy days

205
00:12:14,790 --> 00:12:17,910
attributes such as to underscore named
underscore doc

206
00:12:17,910 --> 00:12:21,639
finally the third thing is to copy the
contents have done this court date

207
00:12:21,639 --> 00:12:25,850
from the rap function into the rapper
which could actually result in quite a

208
00:12:25,850 --> 00:12:29,320
lot object need to be copping

209
00:12:29,320 --> 00:12:32,920
if we using a function closure or
straight class wrapper

210
00:12:32,920 --> 00:12:37,220
this copying they would be done at the
point that the decorator is applied

211
00:12:37,220 --> 00:12:41,540
with the wrapping a descriptive though
it technically now also needs to be done

212
00:12:41,540 --> 00:12:45,230
in the fam rapper as the down rapper is
Craig

213
00:12:45,230 --> 00:12:49,290
every time rapper is Cole for function
down talk of

214
00:12:49,290 --> 00:12:56,110
this is going to be too slow we need a
more performant way of handling this

215
00:12:56,110 --> 00:12:59,810
the solution is what's called object
proxy this is a special

216
00:12:59,810 --> 00:13:03,240
wrapper class which looks and behaves
like what

217
00:13:03,240 --> 00:13:06,510
racked is a complicated based in its I'm
rot

218
00:13:06,510 --> 00:13:10,329
some actually can adjust gloss over love
details at this

219
00:13:10,329 --> 00:13:15,160
shot though it copies limited attributes
from the wrapped object to itself

220
00:13:15,160 --> 00:13:19,070
and otherwise is a special method
properties and underscore

221
00:13:19,070 --> 00:13:26,070
get at her to fetch action beach from
the wrapped object anne when required

222
00:13:26,660 --> 00:13:30,000
what we know how to do is to arrive at
our wrap a class from the right object

223
00:13:30,000 --> 00:13:31,070
proxy

224
00:13:31,070 --> 00:13:35,279
doing so attributes like to underscore
named and underscored of when create

225
00:13:35,279 --> 00:13:36,139
from the rapper

226
00:13:36,139 --> 00:13:39,190
return fais for the rap function stay

227
00:13:39,190 --> 00:13:43,060
calls like inspect don't get ek acts pic
and inspector

228
00:13:43,060 --> 00:13:48,570
gets off will also work in return what
we expect

229
00:13:48,570 --> 00:13:52,870
hat now for implementing a decorated
appears to work correctly

230
00:13:52,870 --> 00:13:56,820
but needing to do all that each time is
more work than we really want

231
00:13:56,820 --> 00:14:02,060
well we can't do therefore is Craig
decorator to help the scrape decorators

232
00:14:02,060 --> 00:14:05,480
this would reduce the code we need to
write for each decorated to a single

233
00:14:05,480 --> 00:14:07,579
function shank

234
00:14:07,579 --> 00:14:11,360
what what this decorate a factor need to
look like that

235
00:14:11,360 --> 00:14:15,079
as a tent at declared factories quite
simple and it isn't really much

236
00:14:15,079 --> 00:14:17,320
different to using a partial

237
00:14:17,320 --> 00:14:20,320
combining out new wrapper function I'm

238
00:14:20,320 --> 00:14:23,440
from when the decorators to find with
the wrapped

239
00:14:23,440 --> 00:14:27,320
function when the decorator is used and
passing them into a function wrapper

240
00:14:27,320 --> 00:14:30,480
object

241
00:14:30,480 --> 00:14:34,740
to Tampa skolko message about function
rapper for when the rapper is used

242
00:14:34,740 --> 00:14:36,510
around in all of action

243
00:14:36,510 --> 00:14:39,560
now to score to decorate a wrapper
function with the wrapped

244
00:14:39,560 --> 00:14:44,170
function and i cant leaving the calling
of the wrapped function up to the

245
00:14:44,170 --> 00:14:46,160
decorate a wrapper function

246
00:14:46,160 --> 00:14:49,560
totally losing at this point I guess

247
00:14:49,560 --> 00:14:56,560
in the case where pining a function the
rapper's also passed the bound rapper

248
00:14:56,649 --> 00:15:03,649
I lied I just

249
00:15:07,079 --> 00:15:11,709
the bath rappers more or less the same
with the Dundas Coco method delegating

250
00:15:11,709 --> 00:15:14,240
to the decorate a wrapper function

251
00:15:14,240 --> 00:15:18,570
so we can make rating decorated easier
using a factory

252
00:15:18,570 --> 00:15:21,990
let's see what we had have excelled at
other problems we I'll see what I see

253
00:15:21,990 --> 00:15:24,970
what other problems we confine

254
00:15:24,970 --> 00:15:28,500
the first such issuing crating
decorators come work

255
00:15:28,500 --> 00:15:31,970
on both normal functions an instance
method

256
00:15:31,970 --> 00:15:36,320
class this from have saw changing at
decorate a print at

257
00:15:36,320 --> 00:15:42,920
argument pass for a normal function the
oxygen get a top love to arguments

258
00:15:42,920 --> 00:15:46,680
did the same for instance method and the
result is the fact

259
00:15:46,680 --> 00:15:50,259
the problem here is what have to
decorate want to know what the actual

260
00:15:50,259 --> 00:15:54,430
instance of the class was we have lost
that information when the function was

261
00:15:54,430 --> 00:15:55,940
bound to the CAF

262
00:15:55,940 --> 00:15:59,040
and is now associated with the wrapped
function passed in

263
00:15:59,040 --> 00:16:03,190
rather than the argument list and she
used normal function claes

264
00:16:03,190 --> 00:16:06,649
into on a on a method have class you
know what you

265
00:16:06,649 --> 00:16:09,670
usually happens you get the self
argument passed an explicitly

266
00:16:09,670 --> 00:16:12,910
so we don't have that in this case

267
00:16:12,910 --> 00:16:16,310
to solve this problem week may remember
what the instance walls

268
00:16:16,310 --> 00:16:19,540
that was passed to the Dunder school get
message

269
00:16:19,540 --> 00:16:22,790
when it was called fun function this can

270
00:16:22,790 --> 00:16:28,339
then be passed through to the down
rapper when its credit

271
00:16:28,339 --> 00:16:32,079
in about iraq to the instance point it
can then be passed through to the

272
00:16:32,079 --> 00:16:33,720
decorator wrapper function

273
00:16:33,720 --> 00:16:37,610
as an extra document you may have missed
it but

274
00:16:37,610 --> 00:16:41,490
on the previous I just begin to fall for
the case for normal function

275
00:16:41,490 --> 00:16:45,600
in that top level rapper we passed non
for this new instance

276
00:16:45,600 --> 00:16:50,190
argument so then the bottom iran-iraq

277
00:16:50,190 --> 00:16:54,509
this then allows us to be out to
distinguish between normal function call

278
00:16:54,509 --> 00:16:58,750
and instance method call within the one
decorate a wrapper function

279
00:16:58,750 --> 00:17:02,410
the reference to the instances even
Pasig partly so we don't have to juggle

280
00:17:02,410 --> 00:17:03,620
with the argument

281
00:17:03,620 --> 00:17:08,120
to me that at all the way for instance
method

282
00:17:08,120 --> 00:17:13,839
unfortunately I got done now is when
calling instance method by the class of

283
00:17:13,839 --> 00:17:17,949
the passing in the instance has an
argument the instant pasta decorate a

284
00:17:17,949 --> 00:17:19,240
function is not

285
00:17:19,240 --> 00:17:25,030
instead the reference to the instance
gets passed through the first argument

286
00:17:25,030 --> 00:17:28,360
to delete this variation we can check
for instance being non

287
00:17:28,360 --> 00:17:31,780
before calling decorate a wrapper
function and popped the influence of the

288
00:17:31,780 --> 00:17:33,700
start of the I can at least

289
00:17:33,700 --> 00:17:38,559
with any is a partial to bind the
instance to the REC function ourselves

290
00:17:38,559 --> 00:17:42,510
and call the decorator wrapper function
we then get the same result no matter

291
00:17:42,510 --> 00:17:44,820
whether the instance method called by
the class

292
00:17:44,820 --> 00:17:51,620
or not this fatal does so upset things
the way we have a class method

293
00:17:51,620 --> 00:17:55,820
also causing the same issue for static
method in both of those cases

294
00:17:55,820 --> 00:17:58,860
instances also pasta not

295
00:17:58,860 --> 00:18:02,059
the result is that the first the real
first Acme ends up

296
00:18:02,059 --> 00:18:06,770
s instance which is of the games because
rock

297
00:18:06,770 --> 00:18:09,900
we can handle that in a top-level wrap
up by looking at the type that the

298
00:18:09,900 --> 00:18:10,340
wrapped

299
00:18:10,340 --> 00:18:14,340
function prior to doing binding if it is
a class method

300
00:18:14,340 --> 00:18:19,720
or static method then we know anything
else is likely to be instance method for

301
00:18:19,720 --> 00:18:21,549
a class of static method

302
00:18:21,549 --> 00:18:25,630
we use the original bad function wrap up
before the fetal was added

303
00:18:25,630 --> 00:18:28,750
and miss the fiddle into a vision and
the rapper specifically for instance

304
00:18:28,750 --> 00:18:31,340
method

305
00:18:31,340 --> 00:18:35,520
we're still not quite there the IKE
ministers right again

306
00:18:35,520 --> 00:18:40,010
at the instance is still not for static
method this is a problem

307
00:18:40,010 --> 00:18:44,480
public or traceable sent it isn't really
much different to normal function

308
00:18:44,480 --> 00:18:47,870
for a class method been nice for the
instant actually be

309
00:18:47,870 --> 00:18:52,370
ha exceed is a class type corresponding
to the initial

310
00:18:52,370 --> 00:18:55,690
class argument for the class method

311
00:18:55,690 --> 00:18:59,820
big question is whether is another way
getting this

312
00:18:59,820 --> 00:19:02,950
tent that there is a way are still
getting the class

313
00:19:02,950 --> 00:19:06,150
getting the class but the getting mixed
up your mind and

314
00:19:06,150 --> 00:19:11,179
ninety get this one right tent out there
is a way of still getting the class

315
00:19:11,179 --> 00:19:15,010
class method is beyond this is by
accessing

316
00:19:15,010 --> 00:19:19,630
a special actually and and and discourse
self abound faction

317
00:19:19,630 --> 00:19:23,549
we therefore eaten all the instance the
Danisco get message was passed

318
00:19:23,549 --> 00:19:27,460
and used it underscores self attribute
state

319
00:19:27,460 --> 00:19:31,460
success finally we now have the
innocence argument

320
00:19:31,460 --> 00:19:35,490
for instance method being the instanceof
the class

321
00:19:35,490 --> 00:19:40,210
for a class method it is the class
itself after normal function instances

322
00:19:40,210 --> 00:19:42,789
not

323
00:19:42,789 --> 00:19:46,980
have one more situation consider that is
where the 12

324
00:19:46,980 --> 00:19:52,080
decorate costs what happens then in this
case the instances still not

325
00:19:52,080 --> 00:19:56,130
so from that we cannot distinguish it
from a normal function

326
00:19:56,130 --> 00:20:00,380
if we also look at the rat function no
will say that it is a class

327
00:20:00,380 --> 00:20:04,140
type whereas it would be a a function in
the case

328
00:20:04,140 --> 00:20:07,260
have a normal function being called so
we

329
00:20:07,260 --> 00:20:11,169
likely may have a way to distinguish so
this works at okay

330
00:20:11,169 --> 00:20:14,260
because take a look at the type of what
is being wrapped in this case

331
00:20:14,260 --> 00:20:17,669
this means we can now have the ability
to create a universal

332
00:20:17,669 --> 00:20:20,830
decorator that is a decorator can't
Taman

333
00:20:20,830 --> 00:20:25,789
what it is wrapping this does away with
the need to create separate decorators

334
00:20:25,789 --> 00:20:32,280
for functions instance methods which
would otherwise do the same thing

335
00:20:32,280 --> 00:20:35,330
as a decorator so far did not allow
arguments to be

336
00:20:35,330 --> 00:20:39,690
spot when being applied to function if
documents to the decorator

337
00:20:39,690 --> 00:20:43,730
require the decorated definition comming
nested within a function to create a

338
00:20:43,730 --> 00:20:45,250
function closure

339
00:20:45,250 --> 00:20:48,360
when the app to decorate a factory
function is used

340
00:20:48,360 --> 00:20:52,799
it pretends to in a decorator faction
positional okay with documents could be

341
00:20:52,799 --> 00:20:53,890
used t

342
00:20:53,890 --> 00:20:57,210
I have a preference for using came up
que les documents

343
00:20:57,210 --> 00:21:01,799
as possibly a better conventional
explain blind man

344
00:21:01,799 --> 00:21:06,330
so if I couldn't have default values the
how to decorate a factory with take the

345
00:21:06,330 --> 00:21:06,710
rap

346
00:21:06,710 --> 00:21:10,539
function as first I commit with not as a
default

347
00:21:10,539 --> 00:21:15,520
decorator arguments holler decorator I
can't would now be passed it

348
00:21:15,520 --> 00:21:19,650
keyword documents on the first call
wrapped will be non

349
00:21:19,650 --> 00:21:23,830
and a partial issues to return to
decorate a factory again

350
00:21:23,830 --> 00:21:30,830
on the second call wrapped his past and
this time is ripe to decorate a faction

351
00:21:31,559 --> 00:21:36,120
because we have to fall I could say we
don't actually need to pass the IOC

352
00:21:36,120 --> 00:21:40,640
in which case to decorate a factory is
applied direct to the function being

353
00:21:40,640 --> 00:21:44,010
decorated because wrapped is not not

354
00:21:44,010 --> 00:21:48,370
when passed in decorator is wrapped
around the function immediately

355
00:21:48,370 --> 00:21:53,380
skipping a return to factory second time

356
00:21:53,380 --> 00:21:57,280
now why said a convention having keyway
documents public good idea

357
00:21:57,280 --> 00:22:00,909
is that possible Friel ash to enforce it
using the new keyword

358
00:22:00,909 --> 00:22:05,559
I only arguments in text this way you
avoid the problems have someone passing

359
00:22:05,559 --> 00:22:10,100
a decorator argument as the positional
argument for wrapped by mistake

360
00:22:10,100 --> 00:22:15,820
for consistency k what I N E arguments
can also be in force for required ACK

361
00:22:15,820 --> 00:22:19,990
even though isn't strictly necessary

362
00:22:19,990 --> 00:22:23,880
the final result is we now have a manger
crating decorators that prepares to

363
00:22:23,880 --> 00:22:25,220
function name

364
00:22:25,220 --> 00:22:28,690
documentation strings arguments best
cation

365
00:22:28,690 --> 00:22:33,020
and even retrieving a sauce kit one
decorated can be used on

366
00:22:33,020 --> 00:22:37,500
classes functions instance methods and
class methods

367
00:22:37,500 --> 00:22:41,780
it's also easy to spot decorator
occupant a final act to be optional if

368
00:22:41,780 --> 00:22:43,470
desired

369
00:22:43,470 --> 00:22:46,710
so one magic decorator

370
00:22:46,710 --> 00:22:50,000
so this has been a whirlwind tower at
this topic as I

371
00:22:50,000 --> 00:22:53,659
as much as I covered it still doesn't
actually cover everything I could

372
00:22:53,659 --> 00:22:57,409
and and since this is actually slide
site did last year

373
00:22:57,409 --> 00:23:02,039
I some other details of how I do it
changed a bit

374
00:23:02,039 --> 00:23:06,650
so to blog post series liked it back at
the beginning in the year

375
00:23:06,650 --> 00:23:09,950
if you wanna know more about it go back
and rate those because

376
00:23:09,950 --> 00:23:13,650
they have the final solution I ended up
with for this to cover some more

377
00:23:13,650 --> 00:23:17,710
little caveat to call in a case which
stuff and I am NOT happening here

378
00:23:17,710 --> 00:23:21,909
and so you get a block sector you
actually make if you go to Blogger

379
00:23:21,909 --> 00:23:25,830
of pesticide its blog blogger is a pain
have used

380
00:23:25,830 --> 00:23:30,730
I save knife I actually easy indicators
like it up repay for wrapped

381
00:23:30,730 --> 00:23:35,169
and under the you'll find a.m. a subject
to call blocking is an index in there

382
00:23:35,169 --> 00:23:38,260
evolved to blog posts and the recorder
on hand to capture the math

383
00:23:38,260 --> 00:23:43,140
blogger now I'm up to blog post 10 I
think in that Syrians

384
00:23:43,140 --> 00:23:48,370
I'm not done and

385
00:23:48,370 --> 00:23:51,510
I actually wanna iced living things
talking about

386
00:23:51,510 --> 00:23:55,620
decorated spot i wanna talk next about
Tom how to decorate a module

387
00:23:55,620 --> 00:23:59,580
does it I'm which it tries to use to
magic to try and solve this problem too

388
00:23:59,580 --> 00:24:01,260
but doesn't solve all the problems

389
00:24:01,260 --> 00:24:05,200
I'm beyond that I wanna talk about
object proxies I wanted and talk bout

390
00:24:05,200 --> 00:24:06,330
did

391
00:24:06,330 --> 00:24:09,350
the case at Monkey monkey patching and
and

392
00:24:09,350 --> 00:24:13,020
function wrappers and had generally
isn't is decorated in some respects is

393
00:24:13,020 --> 00:24:16,559
a subset up monkey patching

394
00:24:16,559 --> 00:24:19,630
monkey patching applying function
rappers decorated just

395
00:24:19,630 --> 00:24:24,400
a a.m. sanitized version you can use
your bank code manually

396
00:24:24,400 --> 00:24:28,690
someone talk about a lead as well i
wanna talk about some other topics do is

397
00:24:28,690 --> 00:24:30,450
stop post import ok so

398
00:24:30,450 --> 00:24:36,630
II I could go another 10 posts yet so if
you're interested

399
00:24:36,630 --> 00:24:40,549
now so I should

400
00:24:40,549 --> 00:24:44,549
the said he did go to to Colton Myers
talked this morning

401
00:24:44,549 --> 00:24:48,140
cake decorators are easy they're easy as
you can see by what explain

402
00:24:48,140 --> 00:24:51,520
well they're actually bit more
complicated than that now

403
00:24:51,520 --> 00:24:55,210
rather than go on trial did Kate
everything I've done which

404
00:24:55,210 --> 00:24:59,480
could blame on a bit I I do have I have
done a listen to package it called

405
00:24:59,480 --> 00:24:59,890
wrapped

406
00:24:59,890 --> 00:25:03,330
at up on key topics up on popeye I am

407
00:25:03,330 --> 00:25:06,409
and I say it

408
00:25:06,409 --> 00:25:09,470
its as use of caught my eyes example
this morning if you select

409
00:25:09,470 --> 00:25:13,730
actually don't have a good example here
it's impossible process

410
00:25:13,730 --> 00:25:17,299
I am if you gain to what they say

411
00:25:17,299 --> 00:25:20,929
if you gonna write decorated for
yourself yehiya fall in the night

412
00:25:20,929 --> 00:25:24,570
sent where at that using a function
close it the public

413
00:25:24,570 --> 00:25:28,390
I happily satisfied everything you need
to do but he need to make it

414
00:25:28,390 --> 00:25:31,659
work if you gonna provide decorator
lottery which

415
00:25:31,659 --> 00:25:35,900
has to be used by other people then
Chinese wrapped

416
00:25:35,900 --> 00:25:40,190
because united in it should work and not
have always funny caveat

417
00:25:40,190 --> 00:25:44,309
on cases say try say hi

418
00:25:44,309 --> 00:25:47,770
now live into questions is sick I will
I'm a plug

419
00:25:47,770 --> 00:25:52,059
I so I worked in the relic I the reason
I know about all this stuff is because

420
00:25:52,059 --> 00:25:54,630
we do horrible stuff with monkey
patching

421
00:25:54,630 --> 00:25:59,610
I'm we take your code which run in
production

422
00:25:59,610 --> 00:26:02,840
you trust as amazingly because I go in
there and do

423
00:26:02,840 --> 00:26:06,130
lots and lots of nasty stuff to it and

424
00:26:06,130 --> 00:26:09,370
this is why I worry about this stuff

425
00:26:09,370 --> 00:26:13,409
and make sure it works because if I do
something wrong

426
00:26:13,409 --> 00:26:18,080
news function closer there are lots lots
the cases were all break your code and

427
00:26:18,080 --> 00:26:20,159
you'll come screaming at

428
00:26:20,159 --> 00:26:24,320
so that's why I'm just know it's tough
yet we've got test the pie party on to

429
00:26:24,320 --> 00:26:24,679
not

430
00:26:24,679 --> 00:26:28,370
I'm so if you are already scooting off
to some the other

431
00:26:28,370 --> 00:26:31,929
I'm restaurant more formal nothing's

432
00:26:31,929 --> 00:26:36,990
please come along an I guess they'll be
the congregation at people at some point

433
00:26:36,990 --> 00:26:37,980
we'll head down

434
00:26:37,980 --> 00:26:42,340
so a come on and enjoy that and I can
talk to you later reading this stuff

435
00:26:42,340 --> 00:26:47,029
but otherwise right now she got any
questions

436
00:26:47,029 --> 00:26:49,809
so if you have questions you can just
grab your hand we have time for maybe

437
00:26:49,809 --> 00:26:50,500
one or two

438
00:26:50,500 --> 00:26:53,049
reynolds run over to you and give you
the mic so please raise your hand if you

439
00:26:53,049 --> 00:26:58,740
have a question for gramm

440
00:26:58,740 --> 00:27:02,059
I S to two quick things that that's
likely related am

441
00:27:02,059 --> 00:27:05,320
you still have in the current version of
pack about wrapped

442
00:27:05,320 --> 00:27:08,409
the am you do is is is instance

443
00:27:08,409 --> 00:27:11,779
have class matter static method so
somebody were to implement that

444
00:27:11,779 --> 00:27:15,090
that word of actively remove some the
arguments but didn't

445
00:27:15,090 --> 00:27:18,210
subclass class method then it would

446
00:27:18,210 --> 00:27:21,360
still break am

447
00:27:21,360 --> 00:27:24,380
to this event now you're asking if it I
would implement

448
00:27:24,380 --> 00:27:27,919
class method myself as opposed to using
version that's

449
00:27:27,919 --> 00:27:30,950
part of standard Python word I'm

450
00:27:30,950 --> 00:27:35,000
wrapped and electrically

451
00:27:35,000 --> 00:27:38,289
now I

452
00:27:38,289 --> 00:27:44,260
it does look at the type is it too much
to a

453
00:27:44,260 --> 00:27:47,490
I'm did the

454
00:27:47,490 --> 00:27:51,100
stopped working I don't hear the huge

455
00:27:51,100 --> 00:27:58,100
echoes coming back like I was before so
oxy mustn't be working

456
00:27:59,660 --> 00:28:02,309
tech I Sep

457
00:28:02,309 --> 00:28:08,320
by Michael a decade after back at the
quick the question was I understand it

458
00:28:08,320 --> 00:28:13,050
and their I some the magic but I
explained a

459
00:28:13,050 --> 00:28:17,150
it was at it worked by looking at

460
00:28:17,150 --> 00:28:20,500
way that you're using class method or

461
00:28:20,500 --> 00:28:23,880
static method our decorators already

462
00:28:23,880 --> 00:28:26,900
and some in the magic was dependent upon
that

463
00:28:26,900 --> 00:28:30,730
Anna what that means is it that you were
to the

464
00:28:30,730 --> 00:28:36,840
go and implement class method or static
method decorators yourself

465
00:28:36,840 --> 00:28:40,290
great dislike us in will wrap still wet

466
00:28:40,290 --> 00:28:44,300
the answer is for those things not the
trip day

467
00:28:44,300 --> 00:28:48,550
cuz up tested this is if you really
needed to do that

468
00:28:48,550 --> 00:28:52,390
for some reason to extend class with
unsteady it didn't change it slightly

469
00:28:52,390 --> 00:28:53,429
for some reason

470
00:28:53,429 --> 00:28:58,210
you can actually derived from them and
once you do that the isn't

471
00:28:58,210 --> 00:29:01,390
and check for ecstatic with a classmate
to works

472
00:29:01,390 --> 00:29:08,390
and wrap still works it up

473
00:29:14,070 --> 00:29:16,730
attack that the question is whether I
see this

474
00:29:16,730 --> 00:29:19,920
as something that could going to stand
library and

475
00:29:19,920 --> 00:29:24,980
it some think that has been suggested
and at the minimum

476
00:29:24,980 --> 00:29:29,530
cuz your apt is great Raptors great to
play with and I've got lots of ideas is

477
00:29:29,530 --> 00:29:32,620
it's not just the function wrappers and
decorated

478
00:29:32,620 --> 00:29:36,110
tech treats explain now Augusta thing if
the function you

479
00:29:36,110 --> 00:29:40,850
post import Hawks Tom and monkey
patching functions and things like that

480
00:29:40,850 --> 00:29:41,550
sarcasm

481
00:29:41,550 --> 00:29:45,770
long way beyond that the one of the key
things in the red flag raised his magic

482
00:29:45,770 --> 00:29:47,100
object proxy which I

483
00:29:47,100 --> 00:29:51,160
totally didn't talk about on there

484
00:29:51,160 --> 00:29:54,830
there is a I'm the week rift proxy
object

485
00:29:54,830 --> 00:29:58,200
which saw this a optic proxy bit its

486
00:29:58,200 --> 00:30:02,010
not because it's a special one related
to we Chris so there's no

487
00:30:02,010 --> 00:30:06,110
just object proxy implementation the
standard library

488
00:30:06,110 --> 00:30:09,580
so one of the things that may lease come
at this is that perhaps if

489
00:30:09,580 --> 00:30:12,900
ones people very fun what I've done is
right not just insane

490
00:30:12,900 --> 00:30:16,350
is that at least the object proxy could
go into the standard lobbying

491
00:30:16,350 --> 00:30:20,790
because I know it's something technique
conkland had the idea of pushing

492
00:30:20,790 --> 00:30:23,940
that we should have something like that
in those 10 loving numb he is back in

493
00:30:23,940 --> 00:30:26,990
and nothing ever happens so have ended
the discussion on that

494
00:30:26,990 --> 00:30:32,700
for everything else on you're getting
the actual decorate a factory near would

495
00:30:32,700 --> 00:30:33,670
be really nice

496
00:30:33,670 --> 00:30:38,220
that I feel like one side do that I've
lost to be controlled play with it

497
00:30:38,220 --> 00:30:45,100
say having K I think that's all we have
time first let's give them a big round

498
00:30:45,100 --> 00:30:52,100
of applause

499
00:31:00,650 --> 00:31:07,200
me

500
00:31:07,200 --> 00:31:07,480
head


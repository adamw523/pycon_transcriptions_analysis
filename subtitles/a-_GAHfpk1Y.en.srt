1
00:00:00,060 --> 00:00:07,060
in

2
00:00:14,470 --> 00:00:15,840
alright sorry about the delay

3
00:00:15,840 --> 00:00:19,580
at the next up is by andrew goodman he's
one of the core Python developers and

4
00:00:19,580 --> 00:00:22,119
he's gonna be talking about designing
jan was migrations

5
00:00:22,119 --> 00:00:29,119
begin hand

6
00:00:29,880 --> 00:00:32,780
hello one home for now am hello everyone

7
00:00:32,780 --> 00:00:35,970
I'm Andrew as you've just been
introduced and the speaker stopped

8
00:00:35,970 --> 00:00:36,510
working

9
00:00:36,510 --> 00:00:41,290
area and and so as crews mentioned I'm a
jacket or developer

10
00:00:41,290 --> 00:00:44,629
but I'm also the author of South the
popular jiang et migrations library

11
00:00:44,629 --> 00:00:51,629
I'm thank you I've been doing this

12
00:00:52,420 --> 00:00:55,930
for one now feels like an age is
actually a seven years

13
00:00:55,930 --> 00:00:59,579
them and south is seven years old I
think in September this year

14
00:00:59,579 --> 00:01:02,600
and so throughout all those many years

15
00:01:02,600 --> 00:01:05,689
I am I've always thought migrations
they're pretty good

16
00:01:05,689 --> 00:01:09,580
they've proven themselves useful South
has been very very popular

17
00:01:09,580 --> 00:01:13,479
more popular I would ever imagined to
start out with ants

18
00:01:13,479 --> 00:01:17,020
it's fantastic I've had people count me
saying them

19
00:01:17,020 --> 00:01:20,740
they know they're writing and he is in
PHP but they still use jangan South

20
00:01:20,740 --> 00:01:22,990
migrations yeah I just after the
solutions

21
00:01:22,990 --> 00:01:28,430
that's kinda reassuring for me but
underlying this whole thing for last 7

22
00:01:28,430 --> 00:01:29,850
is amazing South

23
00:01:29,850 --> 00:01:34,520
he s it was good it was good for its
time it hats

24
00:01:34,520 --> 00:01:37,800
a couple of bad design decisions
initially done

25
00:01:37,800 --> 00:01:41,250
I'm and never to seven years ago I was
much more novice programmer back then

26
00:01:41,250 --> 00:01:46,400
understandable as the years gone by at
got feedback between teeth my users

27
00:01:46,400 --> 00:01:50,600
I realized that actually there are some
call on the line problems in South

28
00:01:50,600 --> 00:01:54,670
and not only is it so they've call the
slight idiosyncrasies

29
00:01:54,670 --> 00:01:59,760
is designed but also is lives next
Django is a third party library

30
00:01:59,760 --> 00:02:03,990
it's not incurred while into cause I
should be there the model south of hacks

31
00:02:03,990 --> 00:02:05,120
that is there purely

32
00:02:05,120 --> 00:02:08,739
to be that integration the Django its
cool hack for reason is very obvious

33
00:02:08,739 --> 00:02:12,680
light no sign that this is the bat by
the house with for love horrible changes

34
00:02:12,680 --> 00:02:14,000
since to lapse the settings

35
00:02:14,000 --> 00:02:17,299
runtime: filled with the RM in the app
cache in that's not good

36
00:02:17,299 --> 00:02:20,360
and so about two or three years ago

37
00:02:20,360 --> 00:02:24,099
me in some other call developers site
for making an initial plan for this

38
00:02:24,099 --> 00:02:27,150
the idea was that we take south and we
take the

39
00:02:27,150 --> 00:02:31,659
to abstraction back and got a bit better
take your database and turns into a nice

40
00:02:31,659 --> 00:02:35,780
easy liar you can use and take that and
put into Jack itself as a

41
00:02:35,780 --> 00:02:40,160
schema abstraction back and kind of
thing at the same time we put in there

42
00:02:40,160 --> 00:02:42,910
some RM hopes that we get to the hacks
much on South

43
00:02:42,910 --> 00:02:46,940
things like be able to change your
models at runtime be able to serve

44
00:02:46,940 --> 00:02:50,840
load and unload for versions models and
CRM without how individual

45
00:02:50,840 --> 00:02:54,069
settings this'll seemed fine am as a

46
00:02:54,069 --> 00:02:57,240
a site that the same time the families
that we would have south to

47
00:02:57,240 --> 00:03:00,780
and South he would be this other reverse
South a different format

48
00:03:00,780 --> 00:03:04,120
by the user interface but using
underlying tanker library

49
00:03:04,120 --> 00:03:07,430
now that was a should have good start
the idea

50
00:03:07,430 --> 00:03:10,940
but when you look at the overall south
as well as libraries the

51
00:03:10,940 --> 00:03:14,470
is one of the very few things in Django
everyone seems to use is almost the

52
00:03:14,470 --> 00:03:16,930
unanimous thing that everyone present
migrations

53
00:03:16,930 --> 00:03:20,650
and wanna john has big problems
historically is that for a new user

54
00:03:20,650 --> 00:03:21,410
especially

55
00:03:21,410 --> 00:03:25,180
you can be very hard to the side what
likely to use robot like you know if

56
00:03:25,180 --> 00:03:25,739
you're going for

57
00:03:25,739 --> 00:03:30,200
wreck I'm API's used rest ring want to
use piston develop many other month

58
00:03:30,200 --> 00:03:34,000
and so on every other kind of thing and
so there is some value to having

59
00:03:34,000 --> 00:03:37,170
a blessed optional were preferred option
the stuff

60
00:03:37,170 --> 00:03:40,879
I family went on further the revised
plan was that but we would have

61
00:03:40,879 --> 00:03:44,180
is migrations bills into Django itself

62
00:03:44,180 --> 00:03:47,930
know it's such a fundamental part of the
way you are allocations

63
00:03:47,930 --> 00:03:51,830
and for new users you to bring and
introduced into it

64
00:03:51,830 --> 00:03:55,780
early on and so is felt that actually it
makes little sense

65
00:03:55,780 --> 00:03:59,080
kohut Django it's a very underlying
crucial part of the label the

66
00:03:59,080 --> 00:03:59,980
publications

67
00:03:59,980 --> 00:04:03,700
and so possible incurred but the same
time

68
00:04:03,700 --> 00:04:08,310
these are still logically separate items
I'm I've kept that separation between

69
00:04:08,310 --> 00:04:11,400
the scheme abstraction back and and
migration sort of

70
00:04:11,400 --> 00:04:15,120
front end user interface built into
Django itself

71
00:04:15,120 --> 00:04:18,489
so even when 1.7 has released a new
start using this

72
00:04:18,489 --> 00:04:22,400
you'll be using to obstructions talking
to each other and that means that if you

73
00:04:22,400 --> 00:04:23,259
want to write your

74
00:04:23,259 --> 00:04:26,949
own version of the migrations library if
you want to change the database at

75
00:04:26,949 --> 00:04:27,840
runtime for

76
00:04:27,840 --> 00:04:32,610
some kind of mad crazy reason we have
other reasons to sort of change not the

77
00:04:32,610 --> 00:04:33,180
schema

78
00:04:33,180 --> 00:04:37,300
that back and especially your idea to a
good API its well-defined and you can

79
00:04:37,300 --> 00:04:38,610
step down and use a straight away

80
00:04:38,610 --> 00:04:43,979
not have about those in second but I
first went to cover the key thing here

81
00:04:43,979 --> 00:04:48,810
the I am NOT moving south and the Django
I am adding migrations in Django

82
00:04:48,810 --> 00:04:53,400
I am this is a complete rewrite the
South code they are somewhat similar

83
00:04:53,400 --> 00:04:55,150
incident ideas logic

84
00:04:55,150 --> 00:04:59,250
but a lot of the code has been rewritten
on those migration fall home at three

85
00:04:59,250 --> 00:04:59,790
different

86
00:04:59,790 --> 00:05:03,610
to use interface income although very
different and so it is not the south

87
00:05:03,610 --> 00:05:07,800
you know directly prepares a lot
assertive external similarities to

88
00:05:07,800 --> 00:05:11,110
especially the way organizes and runs
migrations

89
00:05:11,110 --> 00:05:14,639
the kind of asking writer and face the
scheme reduces is this

90
00:05:14,639 --> 00:05:19,070
part of the database backends that
obstructs the scheme or operations over

91
00:05:19,070 --> 00:05:22,570
databases in the same way the RM
abstract things like select Update and

92
00:05:22,570 --> 00:05:23,000
Delete

93
00:05:23,000 --> 00:05:26,900
ever databases the scheme editor blast
right things like CREATE TABLE drop

94
00:05:26,900 --> 00:05:29,720
table Craig index dropped index and
things like that

95
00:05:29,720 --> 00:05:32,620
as you'll see later at the end to the
talk this is very important for some

96
00:05:32,620 --> 00:05:34,550
particular tree databases

97
00:05:34,550 --> 00:05:37,660
is also written to work in touch and it
feels and models so

98
00:05:37,660 --> 00:05:41,330
I'm South for those few of many with it
it works and turned the tables and

99
00:05:41,330 --> 00:05:44,020
columns which is a great for the
starting point for doing

100
00:05:44,020 --> 00:05:48,199
tables rationing my kinda stuff but it's
sorta falls down with more complex

101
00:05:48,199 --> 00:05:49,770
column types in Django

102
00:05:49,770 --> 00:05:52,770
and so what this does instead is it to
give

103
00:05:52,770 --> 00:05:56,750
takes the malls and feel themselves and
then example a foreign key

104
00:05:56,750 --> 00:06:00,630
have a certain name is naturally but the
column name is on the school ID

105
00:06:00,630 --> 00:06:04,030
and with this other slightly higher
level interface

106
00:06:04,030 --> 00:06:07,330
and the new migration stuff has a much
better idea love

107
00:06:07,330 --> 00:06:10,600
what is changing what is staying the
same and it can too much more

108
00:06:10,600 --> 00:06:12,490
intelligent things to have to feel

109
00:06:12,490 --> 00:06:16,570
house models it can know the possum
future versions a field

110
00:06:16,570 --> 00:06:20,680
taken to task strictly I'll minor things
you couldn't do properly

111
00:06:20,680 --> 00:06:24,210
when yes South had just he should have a
name

112
00:06:24,210 --> 00:06:30,620
has your field type and go legislative a
sequel artistically important

113
00:06:30,620 --> 00:06:33,639
the mcdyess a dove other part this is
why I article

114
00:06:33,639 --> 00:06:37,690
Django .tv migrations were just
migrations this is

115
00:06:37,690 --> 00:06:41,020
kinda it's not separate if i Jankovic it
is

116
00:06:41,020 --> 00:06:44,650
somewhat self-contained this is where
you have things like

117
00:06:44,650 --> 00:06:47,960
the user interface other commands for
running I am

118
00:06:47,960 --> 00:06:51,639
migrations the commands for Scott
migrations into one can also making

119
00:06:51,639 --> 00:06:52,729
migrations

120
00:06:52,729 --> 00:06:56,919
and you'll have to call framework with
migration from a kid's things that read

121
00:06:56,919 --> 00:06:58,380
and write migrations files

122
00:06:58,380 --> 00:07:02,330
think the result dependencies into
serialized so straight through plans

123
00:07:02,330 --> 00:07:05,590
and things like the old detector which
I'll come to again the second

124
00:07:05,590 --> 00:07:10,250
but when it does it takes your migration
state picture current models file

125
00:07:10,250 --> 00:07:12,930
and it works for the difference between
them and that's how it can make

126
00:07:12,930 --> 00:07:15,650
migrations for you

127
00:07:15,650 --> 00:07:18,650
but underlying all this is a brand new
migration for

128
00:07:18,650 --> 00:07:22,009
now for those who are familiar I'll show
him the slide

129
00:07:22,009 --> 00:07:25,360
this is the old south migration for my
now it's very very small

130
00:07:25,360 --> 00:07:29,419
I had five until my screen here but I've
highlighted their the top

131
00:07:29,419 --> 00:07:33,699
so the I say faithful sick for that is
the actual coach on migration

132
00:07:33,699 --> 00:07:37,100
this is making a simple table with three
columns the

133
00:07:37,100 --> 00:07:40,120
the rest about file is what's called a
frozen Iran

134
00:07:40,120 --> 00:07:44,250
saw South does is it takes the entire
history of your application

135
00:07:44,250 --> 00:07:48,639
and freeze it into this big subjective
serialized fields in arguments

136
00:07:48,639 --> 00:07:53,270
so I can reconstruct malls around time
that obviously not a great idea

137
00:07:53,270 --> 00:07:56,490
I'm as you can see it's very verbose and
this is quite a small file

138
00:07:56,490 --> 00:08:00,270
if any %uh view from these production
you will have seen files that are

139
00:08:00,270 --> 00:08:03,880
much much love is my second half haha
second

140
00:08:03,880 --> 00:08:08,199
56 and so the ID he was called the more
concise format

141
00:08:08,199 --> 00:08:11,830
and not only that but a format that was
introspect on the carotid

142
00:08:11,830 --> 00:08:15,870
this what you see here all is is it's a
class with two methods

143
00:08:15,870 --> 00:08:19,229
fourth method and a pack which method
when you wanna migration

144
00:08:19,229 --> 00:08:22,880
South just call the fourth method
positing an object that can make schema

145
00:08:22,880 --> 00:08:23,389
changes

146
00:08:23,389 --> 00:08:27,720
and then just let it run this is great
for sympathy in for the nice API

147
00:08:27,720 --> 00:08:31,699
but it means you can't help immigration
will do but actually running it

148
00:08:31,699 --> 00:08:34,969
and if you don't want to market the
databases that have stop alcohol fake

149
00:08:34,969 --> 00:08:36,979
scheme object of my day in

150
00:08:36,979 --> 00:08:40,550
fun through them the method itself hope
they're not call any month in the

151
00:08:40,550 --> 00:08:43,349
process and record with the changes

152
00:08:43,349 --> 00:08:46,649
so the change your status is clarity
format

153
00:08:46,649 --> 00:08:50,120
and this is one where often having a
method you have issues operations

154
00:08:50,120 --> 00:08:53,839
which themselves by simply I will
forward them back its methods

155
00:08:53,839 --> 00:08:57,399
but the nice thing here is that I can
look at this migration in code as well

156
00:08:57,399 --> 00:08:58,019
as

157
00:08:58,019 --> 00:09:02,040
with just text editor I can see this is
crazy model

158
00:09:02,040 --> 00:09:05,199
and you also noted that this is the
whole operation there's no second half

159
00:09:05,199 --> 00:09:06,579
it this is

160
00:09:06,579 --> 00:09:10,009
I all me a seven or eight significant
lines of code here

161
00:09:10,009 --> 00:09:13,929
and the reason for that is that we have
was now called in memory running

162
00:09:13,929 --> 00:09:17,579
so the thing that made these long so
they've pieces a

163
00:09:17,579 --> 00:09:21,279
frozen are in before that announced that
dynamically generated from these

164
00:09:21,279 --> 00:09:22,339
operations

165
00:09:22,339 --> 00:09:27,050
what we do is we load of the migrations
in the full history of the project into

166
00:09:27,050 --> 00:09:27,980
memory

167
00:09:27,980 --> 00:09:32,179
and those operations was having a player
bring the database for words

168
00:09:32,179 --> 00:09:35,329
have a special method that's called
State forward

169
00:09:35,329 --> 00:09:39,009
more but does it as a representation of
the models and at the fields

170
00:09:39,009 --> 00:09:42,959
in an in memory subject like object will
project state and that mutations that

171
00:09:42,959 --> 00:09:43,600
goes

172
00:09:43,600 --> 00:09:47,920
and so incredibly fast dissolving trying
Dixon sativus changes

173
00:09:47,920 --> 00:09:51,649
we can run through every migration in
history buildup on a project States and

174
00:09:51,649 --> 00:09:52,329
then you can

175
00:09:52,329 --> 00:09:56,790
so they've friend about Project state
into an RN itself into a set of models

176
00:09:56,790 --> 00:10:01,119
and that means that we can discard all
back strings information and just

177
00:10:01,119 --> 00:10:05,040
take migration from remember in memory
takes your 10 milliseconds

178
00:10:05,040 --> 00:10:08,959
and then you have a copy of miles way to
go and the money that you saw running

179
00:10:08,959 --> 00:10:10,119
migrations

180
00:10:10,119 --> 00:10:13,399
is also good for the order detector for
the altar detector

181
00:10:13,399 --> 00:10:17,779
takes top run-through version as a hub
for taken on disk version

182
00:10:17,779 --> 00:10:21,029
an indigenous goes through and test them
like what model are here

183
00:10:21,029 --> 00:10:24,800
onto the old version what models have
called disappeared what has changed

184
00:10:24,800 --> 00:10:28,429
assorted compares intelligently and try
to find remains a matching promises

185
00:10:28,429 --> 00:10:30,199
things like that

186
00:10:30,199 --> 00:10:33,790
and said it's a very useful way of doing
all the stuff but

187
00:10:33,790 --> 00:10:38,420
but kinda the knife logical side
migrations little clean code is lovely

188
00:10:38,420 --> 00:10:42,139
if that's possible like dutiful computer
science the world live

189
00:10:42,139 --> 00:10:45,819
ship your obstruction I'm database
themselves are unfortunately

190
00:10:45,819 --> 00:10:50,119
much much worse am there are
peculiarities

191
00:10:50,119 --> 00:10:53,799
unique to each database but after work
through unfortunately South him the

192
00:10:53,799 --> 00:10:55,920
plant experience in most of these

193
00:10:55,920 --> 00:10:59,739
amber outside a run through them for you
here one by one

194
00:10:59,739 --> 00:11:03,079
upon his post-race it's great let's move
on a

195
00:11:03,079 --> 00:11:08,850
the second one

196
00:11:08,850 --> 00:11:12,509
that's kinda PR stride sure his postrace
by the way

197
00:11:12,509 --> 00:11:16,519
the second one is my sequel now my
sequel is a reasonable database

198
00:11:16,519 --> 00:11:21,199
thats tempering my at reactions slightly
a bit as a few key problems

199
00:11:21,199 --> 00:11:26,019
so number one DDL a state official
language that seems like tray table

200
00:11:26,019 --> 00:11:29,249
drop table at index and it's not
transactional

201
00:11:29,249 --> 00:11:32,910
so even they michael has transaction
some other time in in a TV mode

202
00:11:32,910 --> 00:11:36,529
those transactions just finally stop
themselves commit when you try and run

203
00:11:36,529 --> 00:11:39,949
things like at table at column and so
this means that

204
00:11:39,949 --> 00:11:43,040
if migration fails part way through we
can roll back

205
00:11:43,040 --> 00:11:46,399
and on post grades we just go okay
migration filed under: will think he

206
00:11:46,399 --> 00:11:47,489
didn't allow

207
00:11:47,489 --> 00:11:52,079
unfortunately my seat we can't do that
and so migration files and bicycle

208
00:11:52,079 --> 00:11:55,489
you're kinda left up to run devices you
know it's the thing like well

209
00:11:55,489 --> 00:11:59,329
we don't think o'clock and then you to
go in the diving then be yourself

210
00:11:59,329 --> 00:12:02,369
I'm fortunate often not too bad a
situation is all

211
00:12:02,369 --> 00:12:05,600
my just like I did one column in The
another one but it's a really annoying

212
00:12:05,600 --> 00:12:08,369
thing for use at have like kevin is one
whole world have

213
00:12:08,369 --> 00:12:11,850
jus running a command both myself but
I've into database in

214
00:12:11,850 --> 00:12:14,879
typing come on to remove columns
manually so

215
00:12:14,879 --> 00:12:18,860
that's amazing at my school also didn't
have check constraint which is

216
00:12:18,860 --> 00:12:22,399
%um Gemini fine after the easy thing had
to deal with

217
00:12:22,399 --> 00:12:25,889
we just happen says if this tatouages
feature

218
00:12:25,889 --> 00:12:29,129
and that Jan graphical features like
this is like the sad face

219
00:12:29,129 --> 00:12:32,379
supposed to be off transactions this
database has things like check

220
00:12:32,379 --> 00:12:33,079
constraints

221
00:12:33,079 --> 00:12:36,649
it is not there we just sort of know
about how that anything to deal with

222
00:12:36,649 --> 00:12:40,879
and finally SS pumping work and freight
the idea of unique constraint indexes in

223
00:12:40,879 --> 00:12:43,029
my signal F on the sign in the same
namespace

224
00:12:43,029 --> 00:12:46,459
essentially so this means that whenever
you should have Creighton

225
00:12:46,459 --> 00:12:51,129
remove a unique constraint you also into
effect in the end as well

226
00:12:51,129 --> 00:12:54,249
we get round the having sorta almost do
because have different names for them

227
00:12:54,249 --> 00:12:54,799
but its

228
00:12:54,799 --> 00:12:58,839
annoying side effect is not really as
good as it should be

229
00:12:58,839 --> 00:13:02,759
over cialis more fun in a certain sense
what fun

230
00:13:02,759 --> 00:13:07,299
and or cialis generally fine its for so
very old mature database

231
00:13:07,299 --> 00:13:10,899
but at a different simple syntax but if
things like things like counters and

232
00:13:10,899 --> 00:13:11,769
triggers and stuff

233
00:13:11,769 --> 00:13:15,269
the the language is different my second
high-stress

234
00:13:15,269 --> 00:13:18,929
and is very picky about names he counts
I think stop name to the number imposed

235
00:13:18,929 --> 00:13:19,269
in

236
00:13:19,269 --> 00:13:22,679
Oracle them from a shorter length
friction on things like that

237
00:13:22,679 --> 00:13:27,239
and it has some unique all sort of
behaviour committing to a from

238
00:13:27,239 --> 00:13:30,850
a text field Django's have put the aloe
b.com title

239
00:13:30,850 --> 00:13:34,319
inge orkut you just can't do that and so
in the back and we have to

240
00:13:34,319 --> 00:13:38,309
at new column up dayton was later
crossed leave your common rename a new

241
00:13:38,309 --> 00:13:38,850
column

242
00:13:38,850 --> 00:13:41,939
which is a patent for Miley to sickle
light

243
00:13:41,939 --> 00:13:45,529
I am the sequel lights

244
00:13:45,529 --> 00:13:49,480
the idea of having skin migrations is
kinda like having pics fly

245
00:13:49,480 --> 00:13:52,759
it's technically possible if you have
like enough equipment

246
00:13:52,759 --> 00:13:55,959
it's probably not advisable I'm sequel
lighthouse

247
00:13:55,959 --> 00:13:59,999
just to DDL statements bed the other
thing adding more but

248
00:13:59,999 --> 00:14:04,079
has he has Craig table at column there's
no to the table with

249
00:14:04,079 --> 00:14:07,559
there is a drop table sorry but there's
no to the column as I alter column

250
00:14:07,559 --> 00:14:10,999
the snow sitive Brunton and this is and
to top it all off

251
00:14:10,999 --> 00:14:14,929
there is no way to see Polanski was a
wrong time a park in a CREATE TABLE

252
00:14:14,929 --> 00:14:16,169
statement

253
00:14:16,169 --> 00:14:20,040
you do you till he gets like that but I
lovee seaports while former

254
00:14:20,040 --> 00:14:23,609
it looks really nice in the terminal be
at a manly posits equal

255
00:14:23,609 --> 00:14:26,919
or you can do other things things but to
get it back to its it much harder to

256
00:14:26,919 --> 00:14:27,459
book with

257
00:14:27,459 --> 00:14:31,339
and be flexible light it's not designed
for this see collided hun tastic

258
00:14:31,339 --> 00:14:32,369
embedded database

259
00:14:32,369 --> 00:14:35,639
really good about it is not designed to
run production that's light on please

260
00:14:35,639 --> 00:14:37,119
don't do it

261
00:14:37,119 --> 00:14:41,879
I am if you want is a for development
that's fine be prepared to witness

262
00:14:41,879 --> 00:14:44,839
especially remember the sequel like
doesn't enforce constraints nearly as

263
00:14:44,839 --> 00:14:46,309
much as the other two databases

264
00:14:46,309 --> 00:14:49,959
so you can put the wrong tights and
columns and things and say when you put

265
00:14:49,959 --> 00:14:52,579
the data across you may find doesn't fit

266
00:14:52,579 --> 00:14:56,939
and used to be the sequel light was
because House press hard to install on a

267
00:14:56,939 --> 00:14:57,629
Mac

268
00:14:57,629 --> 00:15:02,919
back and fix now has a has pressed of
exists please go and use it

269
00:15:02,919 --> 00:15:07,649
but that's kinda you know part of the of
the course we're developing migration

270
00:15:07,649 --> 00:15:08,160
like

271
00:15:08,160 --> 00:15:11,589
Django Hafiz historical thing if
supporting

272
00:15:11,589 --> 00:15:15,149
you know for official back and the many
more unofficial back ends and

273
00:15:15,149 --> 00:15:18,639
1 I'd love to develop house cuz any
solution i'm too much realists and

274
00:15:18,639 --> 00:15:21,779
pragmatists and let us pass a realistic
solution

275
00:15:21,779 --> 00:15:24,829
not gonna tell them the as compatibility
Django's

276
00:15:24,829 --> 00:15:28,089
traditionally been quite good about
possibility we very rarely break stuff

277
00:15:28,089 --> 00:15:28,529
in a

278
00:15:28,529 --> 00:15:32,119
in a1 release pomp I'm sometime today
with a very good reason for it

279
00:15:32,119 --> 00:15:35,699
and general even get all the way from .9
sick for 21.6

280
00:15:35,699 --> 00:15:38,970
I know I've done this took a long time a
whole evening

281
00:15:38,970 --> 00:15:42,859
without breaking much hope so cute do
the companies jumped 33 states make few

282
00:15:42,859 --> 00:15:45,299
changes to the next jump in Seoul

283
00:15:45,299 --> 00:15:48,839
that's about twice to this new be right
as well the money to Django

284
00:15:48,839 --> 00:15:53,480
south is it South exists and South also
the pope said that these migrations

285
00:15:53,480 --> 00:15:56,989
something as compatible with police me
too big nor properly

286
00:15:56,989 --> 00:16:01,149
and so I've mall for a long time over
this the first version of the code for

287
00:16:01,149 --> 00:16:01,660
this

288
00:16:01,660 --> 00:16:05,249
the Alpha didn't have many ways of doing
this and in the end

289
00:16:05,249 --> 00:16:08,999
a cantor very reasonable solution so
what happens is when immigration

290
00:16:08,999 --> 00:16:12,749
is detected as the first migration
application haven't been applied

291
00:16:12,749 --> 00:16:16,359
so basically you got a brand new app
that while some 1.6 got no time I

292
00:16:16,359 --> 00:16:18,369
seventy at first migration

293
00:16:18,369 --> 00:16:21,439
what China day because introspect was
gonna read more than their

294
00:16:21,439 --> 00:16:25,999
it says OK will read all the trait model
statements work have a multi-table be

295
00:16:25,999 --> 00:16:26,549
called

296
00:16:26,549 --> 00:16:29,850
I'll see the tables cyst if those tables
exist it just

297
00:16:29,850 --> 00:16:33,669
marks is applied didn't just as markets
down already marked by

298
00:16:33,669 --> 00:16:37,970
and was on with his life and that means
that you can upgrade to 1.6 1.7

299
00:16:37,970 --> 00:16:41,759
just by having an issue migration and or
to apply everywhere you want it to you

300
00:16:41,759 --> 00:16:44,910
and it happens abductions happen
development happened every machine

301
00:16:44,910 --> 00:16:48,220
it's a very painless process the poor
thing I is about three four lines like

302
00:16:48,220 --> 00:16:48,489
this

303
00:16:48,489 --> 00:16:51,919
saying move after migrations from this
come on

304
00:16:51,919 --> 00:16:54,919
done to move south harder

305
00:16:54,919 --> 00:16:58,910
and South have the same naming
convention is the migrations for its

306
00:16:58,910 --> 00:17:00,040
files which is a

307
00:17:00,040 --> 00:17:03,529
ap slash migration slash number
something for popeye

308
00:17:03,529 --> 00:17:07,839
am what this kid code does is its will
try and put those that matter

309
00:17:07,839 --> 00:17:11,610
naming convention and it catches the
enquirer's case the South file

310
00:17:11,610 --> 00:17:15,370
and has a big nose it for you so any
move to South leading migrations

311
00:17:15,370 --> 00:17:18,400
we have to do is make sure everything
right the newest version which is

312
00:17:18,400 --> 00:17:21,510
I think the South I'm want on all the
new version you can

313
00:17:21,510 --> 00:17:25,309
what you like rations way and a by
noonish migration on this new version

314
00:17:25,309 --> 00:17:31,179
which is kinda what you do to sitive up
a South abandon migration set anyway

315
00:17:31,179 --> 00:17:34,299
but in all of this will the lessons
we've learned like I've

316
00:17:34,299 --> 00:17:37,700
been working through this project for
about you in a bit now

317
00:17:37,700 --> 00:17:41,929
and has been for love French singing
think discovered long way

318
00:17:41,929 --> 00:17:45,259
the first is this I for the summer
before I'm

319
00:17:45,259 --> 00:17:49,470
this in Perth explicit but an implicit
amp a lot of migration stuff

320
00:17:49,470 --> 00:17:53,000
in South was kinda implicit like the
structure the way it works

321
00:17:53,000 --> 00:17:56,070
the code is all conventional mostly you
call code

322
00:17:56,070 --> 00:17:59,090
and the new format is much more
explosive force it has less for

323
00:17:59,090 --> 00:17:59,960
operations

324
00:17:59,960 --> 00:18:03,220
if force in order to force atomic nurse
and that's pretty nice

325
00:18:03,220 --> 00:18:06,269
and Alton on a topical that a all the
important out but

326
00:18:06,269 --> 00:18:10,860
file with a much better way of resolving
those and so you can't I've integration

327
00:18:10,860 --> 00:18:14,840
and the even more human-readable scandal
now may have a world which is

328
00:18:14,840 --> 00:18:18,789
actually fantastic striking a base is
hard

329
00:18:18,789 --> 00:18:21,860
this is Johnny a problem with any
instruction if you

330
00:18:21,860 --> 00:18:25,340
told him on one thing you go downtown
denominator

331
00:18:25,340 --> 00:18:28,470
Knauss migrations is not the lowest
common denominator

332
00:18:28,470 --> 00:18:32,190
it is set about that we can like no if
you trying to certain operations on my

333
00:18:32,190 --> 00:18:33,019
single week ago

334
00:18:33,019 --> 00:18:36,419
no same basic light so there's there's
some advanced

335
00:18:36,419 --> 00:18:39,659
stuff there but purely by supporting the
databases

336
00:18:39,659 --> 00:18:42,799
we have to kowtow somewhat the housing

337
00:18:42,799 --> 00:18:46,570
I can support things like post presence
am building that in the background

338
00:18:46,570 --> 00:18:49,080
easily because that doesn't really fit
into the general flow

339
00:18:49,080 --> 00:18:53,149
Django and so pricing this from scratch
for a new project

340
00:18:53,149 --> 00:18:57,630
what I support more Beebe's possibly not
it depends on the Jersey like I think

341
00:18:57,630 --> 00:18:58,779
poses for a two-base

342
00:18:58,779 --> 00:19:03,059
I think it's very popular used but in
the jungle world materialists

343
00:19:03,059 --> 00:19:07,440
and you know we have tripled as
backgrounds

344
00:19:07,440 --> 00:19:11,730
compatibility is really good now the
health stuff for the Sabres code YouTube

345
00:19:11,730 --> 00:19:12,710
operations

346
00:19:12,710 --> 00:19:15,870
not only does that mean we can't respect
them well I can do with my Scotch

347
00:19:15,870 --> 00:19:17,929
migrations which is when you basically
take

348
00:19:17,929 --> 00:19:21,970
you know a hundred migrations history
and moving down to palm

349
00:19:21,970 --> 00:19:25,570
I'm in South you can't do that was
markedly absent money writing you wanna

350
00:19:25,570 --> 00:19:27,130
make an initial one for the route

351
00:19:27,130 --> 00:19:30,480
channeling am in the new one what you do
is you

352
00:19:30,480 --> 00:19:34,340
take under migrations extracted
operations for them on big list

353
00:19:34,340 --> 00:19:38,289
they will compose or they're all Tomic
and then take less than an optimizer

354
00:19:38,289 --> 00:19:41,830
under the licence hate that word the
treatment Lee they can optimize away

355
00:19:41,830 --> 00:19:45,990
patent abner rename you can pronounce
the at optimize the list down down down

356
00:19:45,990 --> 00:19:48,250
down down to fund a small that can

357
00:19:48,250 --> 00:19:52,269
at this wine only optimizing I'm the
correct history like you got from like a

358
00:19:52,269 --> 00:19:53,029
custom

359
00:19:53,029 --> 00:19:56,279
command in their custom sequestration ok
awesome I'll they've

360
00:19:56,279 --> 00:19:59,460
they stay in there but not in my eyes
way or the other be done stuff like you

361
00:19:59,460 --> 00:20:00,009
can push

362
00:20:00,009 --> 00:20:03,470
at columns and create tables taken
counsel at home

363
00:20:03,470 --> 00:20:07,340
the columns like kinda stuff and it
makes all that and also the internal

364
00:20:07,340 --> 00:20:09,830
code so much better

365
00:20:09,830 --> 00:20:14,870
and finally feedback is vital I'm seven
years a feedback

366
00:20:14,870 --> 00:20:18,950
i think is what has helped me out with
this math like I E

367
00:20:18,950 --> 00:20:22,240
I develop web sites but beasley large
ones these days I am

368
00:20:22,240 --> 00:20:25,679
for I can see everything and there are
people out there who are far more crazy

369
00:20:25,679 --> 00:20:27,649
than I am and it's a good thing

370
00:20:27,649 --> 00:20:31,529
they do horrible things migrations and
tables and they are the people who send

371
00:20:31,529 --> 00:20:32,950
me feedback and bug reports

372
00:20:32,950 --> 00:20:36,580
and they are how I've managed to fix the
horrible horrible part migration for

373
00:20:36,580 --> 00:20:40,759
some nasty edge case you go on a signal
that committed now have the season and

374
00:20:40,759 --> 00:20:41,490
they find it

375
00:20:41,490 --> 00:20:45,399
all they find it and about I is very
important in in getting this to be a

376
00:20:45,399 --> 00:20:49,809
nice table much of a make sure that it's
much more reliable and thing else is

377
00:20:49,809 --> 00:20:53,980
and the last thing the next slide my
last flight

378
00:20:53,980 --> 00:20:57,409
the last slide I miss you very lazy but
thanks on their I might

379
00:20:57,409 --> 00:21:01,009
name to handle like against on great
thing from Sep

380
00:21:01,009 --> 00:21:04,730
far on their and then and that way am
this is a bit different

381
00:21:04,730 --> 00:21:09,370
migrations was made possible thanks to
kicks off campaign Iran

382
00:21:09,370 --> 00:21:13,529
which raise over 17,000 pounds sterling
just just under thirty thousand US

383
00:21:13,529 --> 00:21:14,350
dollars

384
00:21:14,350 --> 00:21:17,970
am and it was all thanks to concoct
community contributions paying for my

385
00:21:17,970 --> 00:21:19,210
time to write this

386
00:21:19,210 --> 00:21:22,730
call the huge creature in a tangle and
so rather thanking me

387
00:21:22,730 --> 00:21:29,730
late also thank everyone contributed
thank you very much

388
00:21:31,860 --> 00:21:38,860
attack

389
00:21:41,770 --> 00:21:43,790
have time for a few questions sir is to
have

390
00:21:43,790 --> 00:21:47,000
yes a.m. I'm curious when I can have
this

391
00:21:47,000 --> 00:21:50,250
so the scheduled release 1.7

392
00:21:50,250 --> 00:21:54,430
is May 15 for them on the Aussie I think
it's sunny mid might end of May

393
00:21:54,430 --> 00:21:58,250
and Django as a start getting never
actually made early states

394
00:21:58,250 --> 00:22:01,110
I have

395
00:22:01,110 --> 00:22:04,100
a I'm in charge this time JSF

396
00:22:04,100 --> 00:22:08,389
I'm in charge the southerly so it will
hopefully be on time not very close to

397
00:22:08,389 --> 00:22:09,009
it so and

398
00:22:09,009 --> 00:22:12,220
my is my rock s I was wearing fur

399
00:22:12,220 --> 00:22:15,649
migrations that require data changes are
like actual I like running commands a

400
00:22:15,649 --> 00:22:17,830
change data in the tables how panels are

401
00:22:17,830 --> 00:22:21,909
so there are operations the you can
write in Manali called fun seek one run

402
00:22:21,909 --> 00:22:22,529
python

403
00:22:22,529 --> 00:22:26,879
principal takes up toughen single string
and a strong that from Hixson

404
00:22:26,879 --> 00:22:30,139
you could be possible function and you
get a scheme editor objecting to that

405
00:22:30,139 --> 00:22:30,919
you like so

406
00:22:30,919 --> 00:22:35,710
laxative ops if you drop a customer you
can optimize past those capacitive

407
00:22:35,710 --> 00:22:36,570
opaque box

408
00:22:36,570 --> 00:22:42,779
but they also left you want them think
again

409
00:22:42,779 --> 00:22:45,970
for the talk I I'm wondering how do you
deal with

410
00:22:45,970 --> 00:22:50,070
I am now that people use get everywhere
with branching

411
00:22:50,070 --> 00:22:54,440
and I know that the Alembic kinda try to
deal with that and try to deal with

412
00:22:54,440 --> 00:22:57,070
conflicts and people work in different
branches and you have to like

413
00:22:57,070 --> 00:23:00,499
merge conflicts and I'm just wonder how

414
00:23:00,499 --> 00:23:04,289
yeah what a question and so southeast a
strike

415
00:23:04,289 --> 00:23:07,389
I'm sort of their history the Croft
migration number seed have

416
00:23:07,389 --> 00:23:10,429
01 02 03 ani: product to our polls

417
00:23:10,429 --> 00:23:13,909
and that's not good I'm the new stuff it
tracks explicitly

418
00:23:13,909 --> 00:23:17,409
explicit and implicit the parent
repackage migration so

419
00:23:17,409 --> 00:23:20,559
it knows as a forgiving that's for
people to stop

420
00:23:20,559 --> 00:23:23,999
tell you you pretty much conflict and it
will offer you

421
00:23:23,999 --> 00:23:28,110
if it detects the two sides are
compatible of your customers option

422
00:23:28,110 --> 00:23:29,549
which will make a second migration

423
00:23:29,549 --> 00:23:33,440
parent both ago this is fine remains the
bubbly I'm so there is

424
00:23:33,440 --> 00:23:37,360
now protection there some like fixing
unlike code

425
00:23:37,360 --> 00:23:41,580
merging is a lot harder like if it fits
any into possible compatibility

426
00:23:41,580 --> 00:23:48,580
ill just block stop thanks is there any
plan for migrating myself migrations

427
00:23:50,220 --> 00:23:54,009
to you'd agenda item migrations should I
just declare

428
00:23:54,009 --> 00:23:57,360
migration bankruptcy start the hash
homeland fortunately I'm

429
00:23:57,360 --> 00:24:01,110
the plaza yet to throw your own history
I'm yet sup migrations a

430
00:24:01,110 --> 00:24:06,399
just been open for top so

431
00:24:06,399 --> 00:24:10,940
one common problem with sites that are I
am that see a lot of traffic

432
00:24:10,940 --> 00:24:14,399
is dealing with migrations that can
cause some

433
00:24:14,399 --> 00:24:17,429
inconsistency or some down time in there
have been some various techniques trying

434
00:24:17,429 --> 00:24:18,200
to do you serve

435
00:24:18,200 --> 00:24:21,759
zero downtime migrations have you
thought about what about something that

436
00:24:21,759 --> 00:24:24,220
could be systematized and brought into

437
00:24:24,220 --> 00:24:27,240
Django I that as a future definitely say

438
00:24:27,240 --> 00:24:31,539
important to like 1.7 I am for my rough
plan for this was to have

439
00:24:31,539 --> 00:24:35,480
the operations can say her back and if
they are blocking and non-blocking

440
00:24:35,480 --> 00:24:39,859
someone post-race adding and & Noble
column is non-blocking happened Tanksley

441
00:24:39,859 --> 00:24:42,869
I said then you have a motorway say this
migration

442
00:24:42,869 --> 00:24:46,279
with block I'm thinking go people lockup
a table

443
00:24:46,279 --> 00:24:49,679
arrival have everything and sounds like
some kind of pain and then your

444
00:24:49,679 --> 00:24:53,029
the people of people can go okay this on
site begins run it

445
00:24:53,029 --> 00:24:56,419
this one is now blocking it Africa so
some something light up

446
00:24:56,419 --> 00:25:01,049
will come eventually sweetie

447
00:25:01,049 --> 00:25:03,360
K mama question please more

448
00:25:03,360 --> 00:25:06,799
was there any overlap work order use
between

449
00:25:06,799 --> 00:25:09,809
Django migrations MC block me a landmark

450
00:25:09,809 --> 00:25:13,110
seems a more projects this do for the
submissions

451
00:25:13,110 --> 00:25:19,039
sucks questions or is there are
overlapping or code reuse between

452
00:25:19,039 --> 00:25:23,159
Django migrations and Siebel welcome
your lender can if you want them

453
00:25:23,159 --> 00:25:26,519
I mean that they could be having so I
haven't been fired by

454
00:25:26,519 --> 00:25:30,610
out Alembic another other frameworks in
packs of antifreeze in RM thing was a

455
00:25:30,610 --> 00:25:32,120
spy by I'm a frame up to love

456
00:25:32,120 --> 00:25:35,200
I just took the idea and then consumed
and not have at me

457
00:25:35,200 --> 00:25:38,419
but there is something that
unfortunately I

458
00:25:38,419 --> 00:25:41,659
my cock roaches getting this done and

459
00:25:41,659 --> 00:25:45,750
seal of me and Jen is RM the car
different levels like janice was much

460
00:25:45,750 --> 00:25:47,570
much higher level two copies or lower so

461
00:25:47,570 --> 00:25:51,779
federal they were I did sharing and
reviewing the unfortunately I'm glad for

462
00:25:51,779 --> 00:25:52,059
you

463
00:25:52,059 --> 00:25:59,059
but you like everybody thank you

464
00:26:03,139 --> 00:26:10,139
half

465
00:26:10,669 --> 00:26:11,260
think month

